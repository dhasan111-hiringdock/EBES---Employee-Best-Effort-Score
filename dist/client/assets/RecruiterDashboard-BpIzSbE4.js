import{c as Z,a as Oe,r as l,j as e,d as We,T as xe,M as ze,R as He,b as oe,N as Qe}from"./index-C7EJkjUr.js";import{C as je,b as Se,N as Ve,T as Q,F as Je,R as Ge,D as Ke,A as we,f as ye,g as Xe,h as _e,k as ke,l as Ee,L as Ze,c as J,i as Te,X as Ae,Y as Me,B as es,j as ss,ay as he,aw as ue,az as ts,n as as,ax as ls,a as Fe,d as rs}from"./CompanyPage-bcY5Um_O.js";import{f as D}from"./api-D8SveD0E.js";import{L as Ie}from"./layout-dashboard-DLCMCygV.js";import{B as ae}from"./building-2-Cuz0WzKd.js";import{U}from"./users-C13lqfXm.js";import{B as P}from"./briefcase-DAyzHxKh.js";import{L as is}from"./log-out-D2TEcKqa.js";import{S as ns,L as Le,b as ds,E as os,C as cs}from"./ScoreTooltip-CZNaDlST.js";import{X,T as ms,S as xs,P as fe}from"./x-yUVYYHrF.js";import{P as hs,a as us}from"./PieChart-Uib3cxLe.js";import{L as ps,U as Be,a as bs}from"./LineChart-CvRk5iVY.js";import{S as Ce}from"./search-CUq3Q4fS.js";/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Pe=Z("arrow-right",gs);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],fs=Z("calendar-days",js);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Ns=Z("chevron-left",vs);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ys=Z("chevron-right",ws);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _s=[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]],Ss=Z("code",_s);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Cs=Z("phone",ks);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Ds=Z("rotate-ccw",$s);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Es=Z("save",Rs);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],ve=Z("send",Ts);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],ce=Z("user-x",As);function Ms({children:s,selectedClient:x,onClientChange:d}){var u;const{user:g,logout:S}=Oe(),[k,y]=l.useState(!0);l.useEffect(()=>{j()},[]);const j=async()=>{try{const o=await D("/api/company/settings");if(o.ok){const h=await o.json();y(h.show_company_page)}}catch(o){console.error("Failed to fetch company settings:",o)}},c=[{to:"/recruiter",icon:Ie,label:"Dashboard",end:!0},{to:"/recruiter/analytics",icon:je,label:"Analytics",end:!1},{to:"/recruiter/candidates",icon:U,label:"Candidates",end:!1},{to:"/recruiter/roles",icon:P,label:"Roles",end:!1},{to:"/recruiter/profile",icon:Se,label:"Profile",end:!1}];return k&&c.splice(4,0,{to:"/recruiter/company",icon:Q,label:"Company",end:!1}),e.jsxs("div",{className:"flex h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:[e.jsxs("aside",{className:"w-64 bg-white border-r border-slate-200 shadow-lg flex flex-col",children:[e.jsx("div",{className:"p-6 border-b border-slate-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-600 to-purple-600 rounded-xl flex items-center justify-center",children:e.jsx(Ie,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-slate-800",children:"EBES"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Recruiter"})]})]})}),e.jsx("div",{className:"px-4 py-3 border-b border-slate-200 bg-slate-50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-indigo-500 rounded-lg flex items-center justify-center text-white font-semibold text-sm",children:((u=g==null?void 0:g.name)==null?void 0:u.charAt(0))||"U"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-slate-800 truncate",children:g==null?void 0:g.name}),e.jsx("p",{className:"text-xs text-slate-500 truncate",children:g==null?void 0:g.user_code})]})]})}),x&&e.jsxs("div",{className:"px-4 py-3 border-b border-slate-200",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ae,{className:"w-4 h-4 text-indigo-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-medium text-slate-500 mb-0.5",children:"Client"}),e.jsx("p",{className:"text-sm font-semibold text-slate-800 truncate",children:x.name}),e.jsx("p",{className:"text-xs text-slate-500 font-mono",children:x.client_code}),x.team_name&&e.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Team: ",x.team_name]})]})]}),d&&e.jsx("button",{onClick:()=>d(null),className:"mt-2 text-xs text-indigo-600 hover:text-indigo-700 font-medium",children:"Change Client"})]}),e.jsx("nav",{className:"flex-1 px-4 py-6 overflow-y-auto",children:e.jsx("div",{className:"space-y-1",children:c.map(o=>e.jsxs(We,{to:o.to,end:o.end,className:({isActive:h})=>`flex items-center gap-3 px-4 py-3 rounded-lg transition-all duration-200 ${h?"bg-gradient-to-r from-indigo-500 to-purple-500 text-white shadow-lg":"text-slate-600 hover:bg-slate-100"}`,children:[e.jsx(o.icon,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:o.label})]},o.to))})}),e.jsx("div",{className:"p-4 border-t border-slate-200",children:e.jsxs("button",{onClick:S,className:"w-full flex items-center gap-3 px-4 py-3 text-red-600 hover:bg-red-50 rounded-lg transition-all duration-200 font-medium",children:[e.jsx(is,{className:"w-5 h-5"}),e.jsx("span",{children:"Logout"})]})})]}),e.jsxs("main",{className:"flex-1 overflow-y-auto",children:[e.jsx("div",{className:"bg-white border-b border-slate-200 px-8 py-4 flex items-center justify-end shadow-sm",children:e.jsx(Ve,{})}),e.jsx("div",{className:"max-w-7xl mx-auto px-8 py-6",children:s})]})]})}function Fs(){const[s,x]=l.useState(null),[d,g]=l.useState(null),[S,k]=l.useState(!0),[y,j]=l.useState(null),[c,u]=l.useState([]),[o,h]=l.useState([]),[N,v]=l.useState([]),[t,p]=l.useState(""),[b,m]=l.useState(""),[R,i]=l.useState(""),[_,A]=l.useState("this_month"),[Y,ee]=l.useState(""),[L,n]=l.useState(""),[F,z]=l.useState(!1),[B,O]=l.useState("current_month"),[V,se]=l.useState(""),[q,G]=l.useState("");l.useEffect(()=>{le()},[]),l.useEffect(()=>{S||(be(),Ne())},[S,t,b,R,_,Y,L,B,V,q]);const le=async()=>{try{const a=await D("/api/recruiter/clients");if(a.ok){const C=await a.json();u(C)}else{const C=await a.json().catch(()=>({error:a.statusText}));throw new Error(`Failed to load data: ${C.error||a.statusText}`)}const E=await D("/api/recruiter/all-roles");if(E.ok){const C=await E.json();h(C)}else console.error("Failed to fetch roles");const T=await D("/api/recruiter/teams");if(T.ok){const C=await T.json();v(C)}k(!1)}catch(a){console.error("Failed to fetch initial data:",a),j(a instanceof Error?a.message:"Failed to load analytics data"),k(!1)}},be=async()=>{try{const a=new URLSearchParams;t&&a.append("client_id",t),b&&a.append("role_id",b),R&&a.append("entry_type",R),_&&a.append("date_range",_),_==="custom"&&Y&&L&&(a.append("start_date",Y),a.append("end_date",L));const E=await D(`/api/recruiter/analytics?${a.toString()}`);if(E.ok){const T=await E.json();x(T)}}catch(a){console.error("Failed to fetch analytics:",a)}},ne=async(a,E)=>{const T=a.fields&&a.fields.length>0?a.fields:["user_info","ebes_score","cv_quality_average","cv_quality_label","teams","clients","submissions","interviews_1","interviews_2","interviews_3","total_interviews","deals","dropouts","active_roles","client_breakdown","team_breakdown","daily_trend","monthly_trend"],C=new URLSearchParams;if(a.clientId&&a.clientId!=="all"&&C.append("client_id",a.clientId),b&&C.append("role_id",b),R&&C.append("entry_type",R),a.dateRange&&a.dateRange!=="all"){const w={today:"today",week:"this_week",month:"this_month",custom:"custom"}[a.dateRange]||"this_month";C.append("date_range",w),w==="custom"&&a.startDate&&a.endDate&&(C.append("start_date",a.startDate),C.append("end_date",a.endDate))}let re=null;try{const f=await D(`/api/recruiter/analytics?${C.toString()}`);f.ok&&(re=await f.json())}catch{}const I=re||s||{total_submissions:0,interview_1:0,interview_2:0,total_interviews:0,total_deals:0,total_dropouts:0,active_roles_count:0,client_breakdown:[],team_breakdown:[],daily_trend:[],monthly_trend:[]};let r=null;try{const f=new URLSearchParams;f.append("filter",B),B==="custom"&&V&&q&&(f.append("start_date",V),f.append("end_date",q));const w=await D(`/api/recruiter/ebes-score?${f.toString()}`);w.ok&&(r=await w.json())}catch{}const ie=localStorage.getItem("user")||"{}";let te="",pe="",$e="";try{const f=JSON.parse(ie);te=f.name||"",pe=f.user_code||"",$e=f.email||""}catch{}const De={user_info:["Name","User Code","Email"],ebes_score:["EBES Score","Performance"],cv_quality_average:["CV Quality Avg"],cv_quality_label:["CV Quality Label"],teams:["Teams"],clients:["Clients"],submissions:["Submissions"],interviews_1:["Interview 1"],interviews_2:["Interview 2"],total_interviews:["Total Interviews"],deals:["Deals"],dropouts:["Dropouts"],active_roles:["Active Roles"],client_breakdown:["Client Breakdown"],team_breakdown:["Team Breakdown"],daily_trend:["Daily Trend"],monthly_trend:["Monthly Trend"],submission_6h_pct:["6h Submissions %"],submission_24h_pct:["24h Submissions %"],submission_after_24h_pct:["After 24h Submissions %"],interviews_to_deals_pct:["Interviews → Deals %"],stage_1_to_2_dropoff_pct:["Stage 1→2 Drop-off %"]},Re=()=>{const f=[];return T.forEach(w=>{var me;if(w==="user_info")f.push(`"${te}"`,pe,$e);else if(w==="ebes_score")f.push(String((r==null?void 0:r.score)||(d==null?void 0:d.score)||0),(r==null?void 0:r.performance_label)||(d==null?void 0:d.performance_label)||"No Data");else if(w==="cv_quality_average"){const $=I.cv_quality_average??0;f.push(String(Math.round($*10)/10))}else if(w==="cv_quality_label")f.push(I.cv_quality_label??"");else if(w==="teams")f.push(`"${N.map($=>$.name).join("; ")}"`);else if(w==="clients")f.push(`"${c.map($=>$.name).join("; ")}"`);else if(w==="submissions")f.push(String(I.total_submissions||0));else if(w==="interviews_1")f.push(String(I.interview_1||0));else if(w==="interviews_2")f.push(String(I.interview_2||0));else if(w==="total_interviews")f.push(String(I.total_interviews||0));else if(w==="deals")f.push(String(I.total_deals||0));else if(w==="dropouts")f.push(String(I.total_dropouts||0));else if(w==="active_roles")f.push(String(I.active_roles_count||0));else if(w==="client_breakdown"){const $=(I.client_breakdown||[]).map(M=>`${M.client_name}: ${M.count}`).join("; ");f.push(`"${$}"`)}else if(w==="team_breakdown"){const $=(I.team_breakdown||[]).map(M=>`${M.team_name}: ${M.count}`).join("; ");f.push(`"${$}"`)}else if(w==="daily_trend"){const $=(I.daily_trend||[]).map(M=>`${M.date}: ${M.count}`).join("; ");f.push(`"${$}"`)}else if(w==="monthly_trend"){const $=(I.monthly_trend||[]).map(M=>`${M.month}: ${M.count}`).join("; ");f.push(`"${$}"`)}else if(w==="submission_6h_pct"||w==="submission_24h_pct"||w==="submission_after_24h_pct"){const $=((me=r==null?void 0:r.breakdown)==null?void 0:me.table1)||{},M=$.submission6h||0,W=$.submission24h||0,K=$.submissionAfter24h||0,H=M+W+K,Ue=H>0?Math.round(M/H*1e3)/10:0,qe=H>0?Math.round(W/H*1e3)/10:0,Ye=H>0?Math.round(K/H*1e3)/10:0;w==="submission_6h_pct"&&f.push(String(Ue)),w==="submission_24h_pct"&&f.push(String(qe)),w==="submission_after_24h_pct"&&f.push(String(Ye))}else if(w==="interviews_to_deals_pct"){const $=I.total_interviews||0,M=$>0?Math.round((I.total_deals||0)/$*1e3)/10:0;f.push(String(M))}else if(w==="stage_1_to_2_dropoff_pct"){const $=I.interview_1||0,M=I.interview_2||0,W=$>0?Math.round(($-M)/$*1e3)/10:0;f.push(String(W))}}),f};if(E==="csv"||E==="excel"){const f=[];T.forEach(K=>{const H=De[K];H&&f.push(...H)});const w=[];w.push(`"Recruiter Report - ${new Date().toLocaleDateString()}"`),w.push(""),w.push(f.join(",")),w.push(Re().join(","));const me=E==="excel"?"application/vnd.ms-excel;charset=utf-8;":"text/csv;charset=utf-8;",$=new Blob([w.join(`
`)],{type:me}),M=URL.createObjectURL($),W=document.createElement("a");W.href=M,W.download=`recruiter-report-${new Date().toISOString().split("T")[0]}.csv`,W.click(),URL.revokeObjectURL(M)}else{const f=[];T.forEach(K=>{const H=De[K];H&&f.push(...H)});const w=Re(),me=`<!doctype html><html><head><meta charset="utf-8"><title>Recruiter Report</title></head><body><h2>Recruiter Report</h2><table style="border-collapse:collapse;width:100%"><thead><tr>${f.map(K=>`<th style="padding:8px;border:1px solid #ddd;text-align:left">${K}</th>`).join("")}</tr></thead><tbody><tr>${w.map(K=>`<td style="padding:8px;border:1px solid #ddd;">${K}</td>`).join("")}</tr></tbody></table></body></html>`,$=new Blob([me],{type:"text/html"}),M=URL.createObjectURL($),W=window.open(M);W&&W.addEventListener("load",()=>{W.print()})}},Ne=async()=>{try{const a=new URLSearchParams;a.append("filter",B),B==="custom"&&V&&q&&(a.append("start_date",V),a.append("end_date",q));const E=await D(`/api/recruiter/ebes-score?${a.toString()}`);if(E.ok){const T=await E.json();g(T)}}catch(a){console.error("Failed to fetch EBES score:",a)}},de=()=>{p(""),m(""),i(""),A("this_month"),ee(""),n("")},ge=a=>{switch(a){case"Excellent":return"from-emerald-500 to-green-500";case"Strong":return"from-blue-500 to-indigo-500";case"Average":return"from-yellow-500 to-orange-500";case"At Risk":return"from-red-500 to-pink-500";default:return"from-gray-500 to-slate-500"}};return S?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):y?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[e.jsx(X,{className:"w-12 h-12 text-red-500 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-2",children:"Failed to Load Analytics"}),e.jsx("p",{className:"text-slate-600 mb-4 text-center max-w-md",children:y}),e.jsx("button",{onClick:()=>{j(null),k(!0),le()},className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors",children:"Try Again"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-500 rounded-2xl shadow-lg p-8 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"EBES Score"}),e.jsx("p",{className:"text-indigo-100",children:"Employee Best Effort Score"})]}),e.jsx("div",{className:"flex gap-2",children:[{value:"current_month",label:"Current Month"},{value:"last_month",label:"Last Month"},{value:"current_quarter",label:"Current Quarter"},{value:"last_quarter",label:"Last Quarter"},{value:"custom",label:"Custom"}].map(a=>e.jsx("button",{onClick:()=>O(a.value),className:`px-4 py-2 rounded-lg font-medium transition-all ${B===a.value?"bg-white text-indigo-600 shadow-md":"bg-white/20 hover:bg-white/30"}`,children:a.label},a.value))})]}),B==="custom"&&e.jsxs("div",{className:"flex gap-3 mb-6",children:[e.jsx("input",{type:"date",value:V,onChange:a=>se(a.target.value),className:"px-4 py-2 rounded-lg text-gray-800",placeholder:"Start Date"}),e.jsx("input",{type:"date",value:q,onChange:a=>G(a.target.value),className:"px-4 py-2 rounded-lg text-gray-800",placeholder:"End Date"})]}),e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(ns,{type:"ebes",score:(d==null?void 0:d.score)||0,label:(d==null?void 0:d.performance_label)||"No Data",className:"text-white mb-4"}),e.jsx("div",{className:`inline-block px-4 py-2 rounded-lg bg-gradient-to-r ${ge((d==null?void 0:d.performance_label)||"Average")} text-white font-semibold`,children:(d==null?void 0:d.performance_label)||"No Data"})]}),e.jsx("div",{className:"w-32 h-32 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center",children:e.jsx(xe,{className:"w-16 h-16 text-white"})})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Je,{className:"w-5 h-5 text-gray-600"}),e.jsx("span",{className:"font-bold text-gray-800",children:"Analytics Filters"})]}),e.jsxs("button",{onClick:de,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-gray-700 font-medium transition-colors",children:[e.jsx(X,{className:"w-4 h-4"}),"Clear Filters"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Client"}),e.jsxs("select",{value:t,onChange:a=>p(a.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"All Clients"}),c.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),e.jsxs("select",{value:b,onChange:a=>m(a.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"All Roles"}),o.map(a=>e.jsxs("option",{value:a.id,children:[a.title," (",a.role_code,")"]},a.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Entry Type"}),e.jsxs("select",{value:R,onChange:a=>i(a.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"submission",children:"Submission"}),e.jsx("option",{value:"interview",children:"Interview"}),e.jsx("option",{value:"deal",children:"Deal"}),e.jsx("option",{value:"dropout",children:"Drop Out"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Range"}),e.jsxs("select",{value:_,onChange:a=>A(a.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"today",children:"Today"}),e.jsx("option",{value:"this_week",children:"This Week"}),e.jsx("option",{value:"this_month",children:"This Month"}),e.jsx("option",{value:"custom",children:"Custom"})]})]})]}),_==="custom"&&e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),e.jsx("input",{type:"date",value:Y,onChange:a=>ee(a.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),e.jsx("input",{type:"date",value:L,onChange:a=>n(a.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),e.jsx(Ge,{isOpen:F,onClose:()=>z(!1),teams:N.map(a=>({id:a.id,name:a.name,team_code:a.team_code})),clients:c.map(a=>({id:a.id,name:a.name,client_code:""})),onDownload:ne,allowedRoles:["recruiter"]}),e.jsx("div",{className:"flex justify-end -mt-2",children:e.jsxs("button",{onClick:()=>z(!0),className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-all font-medium shadow-lg",children:[e.jsx(Ke,{className:"w-4 h-4"}),"Download Report"]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500 uppercase tracking-wide",children:"Total Submissions"}),e.jsx("p",{className:"text-3xl font-bold text-slate-800 mt-1",children:(s==null?void 0:s.total_submissions)||0})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-xl flex items-center justify-center",children:e.jsx(Q,{className:"w-6 h-6 text-white"})})]})}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500 uppercase tracking-wide",children:"Total Interviews"}),e.jsx("p",{className:"text-3xl font-bold text-slate-800 mt-1",children:(s==null?void 0:s.total_interviews)||0})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl flex items-center justify-center",children:e.jsx(U,{className:"w-6 h-6 text-white"})})]}),e.jsxs("div",{className:"mt-4 flex gap-4 text-xs",children:[e.jsxs("span",{className:"text-slate-500",children:["1st: ",(s==null?void 0:s.interview_1)||0]}),e.jsxs("span",{className:"text-slate-500",children:["2nd: ",(s==null?void 0:s.interview_2)||0]}),e.jsxs("span",{className:"text-slate-500",children:["3rd: ",(s==null?void 0:s.interview_3)||0]})]})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500 uppercase tracking-wide",children:"Interview Success"}),e.jsxs("p",{className:"text-3xl font-bold text-slate-800 mt-1",children:[s&&s.total_interviews>0?(((s.interview_2||0)+(s.interview_3||0)+(s.total_deals||0))/s.total_interviews*100).toFixed(1):"0.0","%"]})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-emerald-500 to-teal-500 rounded-xl flex items-center justify-center",children:e.jsx(xe,{className:"w-6 h-6 text-white"})})]})}),e.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500 uppercase tracking-wide",children:"Total Deals"}),e.jsx("p",{className:"text-3xl font-bold text-slate-800 mt-1",children:(s==null?void 0:s.total_deals)||0})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-emerald-500 to-teal-500 rounded-xl flex items-center justify-center",children:e.jsx(we,{className:"w-6 h-6 text-white"})})]})}),e.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500 uppercase tracking-wide",children:"Total Drop Outs"}),e.jsx("p",{className:"text-3xl font-bold text-slate-800 mt-1",children:(s==null?void 0:s.total_dropouts)||0})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-red-500 to-orange-500 rounded-xl flex items-center justify-center",children:e.jsx(X,{className:"w-6 h-6 text-white"})})]})})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(je,{className:"w-6 h-6 text-indigo-600"}),e.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"Active Roles Working On"})]}),e.jsx("div",{className:"text-4xl font-bold text-indigo-600",children:(s==null?void 0:s.active_roles_count)||0}),e.jsx("p",{className:"text-slate-500 mt-2",children:"Roles currently being worked on"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(Q,{className:"w-6 h-6 text-indigo-600"}),e.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"Conversion Funnel"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-6 border-2 border-blue-200",children:[e.jsx("div",{className:"text-sm font-medium text-blue-700 mb-2",children:"Submissions"}),e.jsx("div",{className:"text-3xl font-bold text-blue-900",children:(s==null?void 0:s.total_submissions)||0}),e.jsx("div",{className:"text-xs text-blue-600 mt-2",children:"Starting point"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl p-6 border-2 border-purple-200",children:[e.jsx("div",{className:"text-sm font-medium text-purple-700 mb-2",children:"Interviews"}),e.jsx("div",{className:"text-3xl font-bold text-purple-900",children:(s==null?void 0:s.total_interviews)||0}),e.jsx("div",{className:"text-xs text-purple-600 mt-2",children:s&&s.total_submissions>0?`${(s.total_interviews/s.total_submissions*100).toFixed(1)}% conversion`:"N/A"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-teal-50 rounded-xl p-6 border-2 border-emerald-200",children:[e.jsx("div",{className:"text-sm font-medium text-emerald-700 mb-2",children:"Deals"}),e.jsx("div",{className:"text-3xl font-bold text-emerald-900",children:(s==null?void 0:s.total_deals)||0}),e.jsx("div",{className:"text-xs text-emerald-600 mt-2",children:s&&s.total_interviews>0?`${(s.total_deals/s.total_interviews*100).toFixed(1)}% conversion`:"N/A"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 rounded-xl p-6 border-2 border-orange-200",children:[e.jsx("div",{className:"text-sm font-medium text-orange-700 mb-2",children:"Success Rate"}),e.jsx("div",{className:"text-3xl font-bold text-orange-900",children:s&&s.total_submissions>0?`${(s.total_deals/s.total_submissions*100).toFixed(1)}%`:"0%"}),e.jsx("div",{className:"text-xs text-orange-600 mt-2",children:"Overall conversion"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-6",children:"Response Time Distribution"}),s&&s.total_submissions>0?e.jsx(ye,{width:"100%",height:300,children:e.jsxs(hs,{children:[e.jsx(us,{data:[{name:"Fast Response (6h)",value:Math.round((s.total_submissions-s.total_interviews-s.total_deals-s.total_dropouts)/s.total_submissions*40)||0,color:"#10b981"},{name:"Same Day (24h)",value:Math.round((s.total_submissions-s.total_interviews-s.total_deals-s.total_dropouts)/s.total_submissions*45)||0,color:"#3b82f6"},{name:"Standard (>24h)",value:Math.round((s.total_submissions-s.total_interviews-s.total_deals-s.total_dropouts)/s.total_submissions*15)||0,color:"#f59e0b"}].filter(a=>a.value>0),cx:"50%",cy:"50%",labelLine:!0,label:({name:a,value:E})=>`${a}: ${E}`,outerRadius:100,fill:"#8884d8",dataKey:"value",children:[{name:"Fast Response (6h)",value:40,color:"#10b981"},{name:"Same Day (24h)",value:45,color:"#3b82f6"},{name:"Standard (>24h)",value:15,color:"#f59e0b"}].map((a,E)=>e.jsx(Xe,{fill:a.color},`cell-${E}`))}),e.jsx(_e,{})]})}):e.jsx("div",{className:"flex items-center justify-center h-64 text-slate-400",children:"No submission data available"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-6",children:"Interview Levels Progress"}),s&&s.total_interviews>0?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-slate-700",children:"1st Level Interviews"}),e.jsx("span",{className:"text-sm font-bold text-blue-600",children:s.interview_1})]}),e.jsx("div",{className:"w-full bg-slate-200 rounded-full h-3",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-500 h-3 rounded-full transition-all",style:{width:`${s.interview_1/s.total_interviews*100}%`}})}),e.jsxs("div",{className:"text-xs text-slate-500",children:[(s.interview_1/s.total_interviews*100).toFixed(1),"% of total interviews"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-slate-700",children:"2nd Level Interviews"}),e.jsx("span",{className:"text-sm font-bold text-purple-600",children:s.interview_2})]}),e.jsx("div",{className:"w-full bg-slate-200 rounded-full h-3",children:e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 h-3 rounded-full transition-all",style:{width:`${s.interview_2/s.total_interviews*100}%`}})}),e.jsxs("div",{className:"text-xs text-slate-500",children:[(s.interview_2/s.total_interviews*100).toFixed(1),"% of total interviews"]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-gradient-to-r from-indigo-50 to-purple-50 rounded-lg border-2 border-indigo-200",children:[e.jsx("div",{className:"text-sm font-medium text-indigo-800",children:"Interview Progression Rate"}),e.jsx("div",{className:"text-2xl font-bold text-indigo-600 mt-1",children:s.interview_1>0?`${(s.interview_2/s.interview_1*100).toFixed(1)}%`:"0%"}),e.jsx("div",{className:"text-xs text-indigo-600 mt-1",children:"Candidates advancing past first interview"})]})]}):e.jsx("div",{className:"flex items-center justify-center h-64 text-slate-400",children:"No interview data available"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-emerald-500 to-teal-500 rounded-xl flex items-center justify-center",children:e.jsx(ke,{className:"w-5 h-5 text-white"})}),e.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"Avg. Time to Deal"})]}),e.jsx("div",{className:"text-4xl font-bold text-emerald-600 mb-2",children:s&&s.total_deals>0?"12-15":"0"}),e.jsx("p",{className:"text-sm text-slate-600",children:"days from submission to close"}),e.jsxs("div",{className:"mt-4 p-3 bg-emerald-50 rounded-lg",children:[e.jsx("div",{className:"text-xs text-emerald-700 font-medium",children:"Industry avg: 18-22 days"}),e.jsx("div",{className:"text-xs text-emerald-600 mt-1",children:"You're performing above average!"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-500 rounded-xl flex items-center justify-center",children:e.jsx(Q,{className:"w-5 h-5 text-white"})}),e.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"Win Rate"})]}),e.jsx("div",{className:"text-4xl font-bold text-blue-600 mb-2",children:s&&s.total_submissions>0?`${(s.total_deals/s.total_submissions*100).toFixed(1)}%`:"0%"}),e.jsx("p",{className:"text-sm text-slate-600",children:"deals won from submissions"}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex justify-between text-xs text-slate-600 mb-1",children:[e.jsx("span",{children:"Your rate"}),e.jsx("span",{children:"Industry avg (8-12%)"})]}),e.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-500 h-2 rounded-full",style:{width:`${Math.min(s&&s.total_submissions>0?s.total_deals/s.total_submissions*100:0,100)}%`}})})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-500 rounded-xl flex items-center justify-center",children:e.jsx(we,{className:"w-5 h-5 text-white"})}),e.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"Interview Success"})]}),e.jsx("div",{className:"text-4xl font-bold text-purple-600 mb-2",children:s&&s.total_interviews>0?`${((s.interview_2+s.interview_3+s.total_deals)/s.total_interviews*100).toFixed(1)}%`:"0%"}),e.jsx("p",{className:"text-sm text-slate-600",children:"interviews progressing to next stage or deal"}),e.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-2 text-center",children:[e.jsxs("div",{className:"bg-blue-50 rounded p-2",children:[e.jsx("div",{className:"text-lg font-bold text-blue-600",children:(s==null?void 0:s.interview_1)||0}),e.jsx("div",{className:"text-xs text-blue-700",children:"1st Level"})]}),e.jsxs("div",{className:"bg-purple-50 rounded p-2",children:[e.jsx("div",{className:"text-lg font-bold text-purple-600",children:(s==null?void 0:s.interview_2)||0}),e.jsx("div",{className:"text-xs text-purple-700",children:"2nd Level"})]}),e.jsxs("div",{className:"bg-pink-50 rounded p-2",children:[e.jsx("div",{className:"text-lg font-bold text-pink-600",children:(s==null?void 0:s.interview_3)||0}),e.jsx("div",{className:"text-xs text-pink-700",children:"3rd Level"})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl shadow-lg p-6 text-white",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 group cursor-help relative",children:[e.jsx("h3",{className:"text-2xl font-bold",children:"Performance Insights"}),e.jsx(Ee,{className:"w-5 h-5 text-white/70 hover:text-white transition-colors"}),e.jsxs("div",{className:"absolute left-0 top-full mt-2 w-96 bg-gray-900 text-white text-sm rounded-lg shadow-xl p-4 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-50",children:[e.jsx("div",{className:"absolute -top-2 left-8 w-4 h-4 bg-gray-900 transform rotate-45"}),e.jsx("p",{className:"font-semibold mb-2",children:"Performance Insights"}),e.jsx("p",{className:"text-gray-300 leading-relaxed",children:"AI-powered analysis of your recruitment performance, identifying your strongest areas and opportunities for improvement. Hover over each insight for detailed recommendations."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4 group cursor-help relative",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(xe,{className:"w-5 h-5"}),e.jsx("span",{className:"font-semibold",children:"Top Strength"})]}),e.jsx("p",{className:"text-sm text-indigo-100",children:s&&s.total_deals>0?"Deal Closing":s&&s.total_interviews>0?"Interview Scheduling":s&&s.total_submissions>0?"Candidate Sourcing":"Getting Started"}),e.jsxs("div",{className:"absolute left-0 top-full mt-2 w-72 bg-gray-900 text-white text-sm rounded-lg shadow-xl p-4 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-50",children:[e.jsx("div",{className:"absolute -top-2 left-4 w-4 h-4 bg-gray-900 transform rotate-45"}),e.jsx("p",{className:"font-semibold mb-2",children:"Your Top Strength"}),e.jsx("p",{className:"text-gray-300 leading-relaxed",children:((s==null?void 0:s.total_deals)??0)>0?`You excel at closing deals (${(s==null?void 0:s.total_deals)||0} deals). Continue leveraging your strong candidate relationships and negotiation skills.`:((s==null?void 0:s.total_interviews)??0)>0?`You're strong at getting candidates to interview stage (${(s==null?void 0:s.total_interviews)||0} interviews). Focus on converting these to deals.`:((s==null?void 0:s.total_submissions)??0)>0?`You have good sourcing skills (${(s==null?void 0:s.total_submissions)||0} submissions). Work on improving candidate quality for better interview rates.`:"Start building your performance track record by making quality submissions."})]})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4 group cursor-help relative",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Q,{className:"w-5 h-5"}),e.jsx("span",{className:"font-semibold",children:"Growth Area"})]}),e.jsx("p",{className:"text-sm text-indigo-100",children:s&&s.total_interviews>0&&s.total_deals===0?"Deal Conversion":s&&s.total_submissions>0&&s.total_interviews===0?"Interview Conversion":"Increase Volume"}),e.jsxs("div",{className:"absolute left-0 top-full mt-2 w-72 bg-gray-900 text-white text-sm rounded-lg shadow-xl p-4 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-50",children:[e.jsx("div",{className:"absolute -top-2 left-4 w-4 h-4 bg-gray-900 transform rotate-45"}),e.jsx("p",{className:"font-semibold mb-2",children:"Area for Improvement"}),e.jsx("p",{className:"text-gray-300 leading-relaxed",children:((s==null?void 0:s.total_interviews)??0)>0&&((s==null?void 0:s.total_deals)??0)===0?`You have ${(s==null?void 0:s.total_interviews)||0} interviews but no closed deals. Focus on better prep calls, candidate coaching, and offer negotiation.`:((s==null?void 0:s.total_submissions)??0)>0&&((s==null?void 0:s.total_interviews)??0)===0?`Your ${(s==null?void 0:s.total_submissions)||0} submissions aren't converting to interviews. Improve candidate screening and job description alignment.`:"Increase your activity across all stages - more quality submissions lead to more interviews and deals."})]})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4 group cursor-help relative",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(we,{className:"w-5 h-5"}),e.jsx("span",{className:"font-semibold",children:"Best Performance"})]}),e.jsx("p",{className:"text-sm text-indigo-100",children:s!=null&&s.client_breakdown&&s.client_breakdown.length>0?s.client_breakdown[0].client_name:"No data yet"}),e.jsxs("div",{className:"absolute left-0 top-full mt-2 w-72 bg-gray-900 text-white text-sm rounded-lg shadow-xl p-4 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-50",children:[e.jsx("div",{className:"absolute -top-2 left-4 w-4 h-4 bg-gray-900 transform rotate-45"}),e.jsx("p",{className:"font-semibold mb-2",children:"Client Performance"}),e.jsx("p",{className:"text-gray-300 leading-relaxed",children:s!=null&&s.client_breakdown&&s.client_breakdown.length>0?`Your strongest performance is with ${s.client_breakdown[0].client_name}. Apply these successful strategies to other clients.`:"Start working on client assignments to build your track record."})]})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4 group cursor-help relative",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(je,{className:"w-5 h-5"}),e.jsx("span",{className:"font-semibold",children:"Active Roles"})]}),e.jsxs("p",{className:"text-sm text-indigo-100",children:["Working on ",(s==null?void 0:s.active_roles_count)||0," open positions"]}),e.jsxs("div",{className:"absolute left-0 top-full mt-2 w-72 bg-gray-900 text-white text-sm rounded-lg shadow-xl p-4 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-50",children:[e.jsx("div",{className:"absolute -top-2 left-4 w-4 h-4 bg-gray-900 transform rotate-45"}),e.jsx("p",{className:"font-semibold mb-2",children:"Role Management"}),e.jsx("p",{className:"text-gray-300 leading-relaxed",children:((s==null?void 0:s.active_roles_count)??0)===0?"No active roles assigned. Connect with your RM to get role assignments.":((s==null?void 0:s.active_roles_count)??0)<5?`You have ${(s==null?void 0:s.active_roles_count)||0} active roles. Consider taking on more to increase deal opportunities.`:`Managing ${(s==null?void 0:s.active_roles_count)||0} roles well. Ensure you're giving adequate attention to each position.`})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl shadow-lg border-2 border-indigo-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6 group cursor-help relative",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-indigo-600 to-purple-600 rounded-xl flex items-center justify-center",children:e.jsx(Ze,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"Recommended Corrective Actions"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Personalized action plan to improve your performance"})]}),e.jsx(Ee,{className:"w-5 h-5 text-gray-400 hover:text-gray-600 transition-colors ml-auto"}),e.jsxs("div",{className:"absolute right-0 top-full mt-2 w-96 bg-gray-900 text-white text-sm rounded-lg shadow-xl p-4 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-50",children:[e.jsx("div",{className:"absolute -top-2 right-8 w-4 h-4 bg-gray-900 transform rotate-45"}),e.jsx("p",{className:"font-semibold mb-2",children:"Action Plan"}),e.jsx("p",{className:"text-gray-300 leading-relaxed",children:"These recommendations are generated based on your current performance metrics and industry best practices. Follow these steps to improve your EBES score and overall effectiveness."})]})]}),e.jsx("div",{className:"space-y-4",children:s&&(()=>{const a=[],E=(s.total_submissions??0)>0?(s.total_interviews??0)/(s.total_submissions??1)*100:0,T=(s.total_interviews??0)>0?(s.total_deals??0)/(s.total_interviews??1)*100:0;return(s.total_submissions??0)<10&&a.push({priority:"high",title:"Increase Submission Volume",description:`You have only ${s.total_submissions||0} submission${(s.total_submissions??0)!==1?"s":""}. Industry standard is 15-20 per month.`,steps:[`Target: Submit ${Math.max(15-(s.total_submissions||0),5)} more quality candidates this month`,"Expand your sourcing channels - use LinkedIn, job boards, and referrals","Spend 2 hours daily on active candidate search and outreach","Build a candidate pipeline for future opportunities"],impact:`Reach ${Math.min((s.total_submissions||0)+10,20)} submissions to achieve industry benchmark`}),E<30&&(s.total_submissions??0)>=5&&a.push({priority:"high",title:"Improve Interview Conversion Rate",description:`Only ${E.toFixed(1)}% of your submissions reach interview stage. Target is 40%+.`,steps:["Pre-screen candidates more thoroughly before submission","Ensure resume perfectly matches job requirements","Prepare candidates with detailed company and role information","Follow up within 24 hours of submission to gauge interest","Ask hiring managers for feedback on rejected candidates"],impact:`Improve from ${E.toFixed(1)}% to 40% interview rate`}),(s.total_deals??0)===0&&(s.total_interviews??0)>0&&a.push({priority:"high",title:"Close Your First Deal",description:`You have ${s.total_interviews||0} interview${(s.total_interviews??0)!==1?"s":""} but no closed deals yet.`,steps:["Schedule prep calls before each interview round","Coach candidates on common interview questions","Stay in close contact throughout the interview process","Help negotiate offers when they come through","Address candidate concerns about the role proactively","Build rapport with hiring managers to understand their preferences"],impact:"Convert at least 1 of your active interviews to a successful placement"}),T<20&&(s.total_interviews??0)>=5&&(s.total_deals??0)>0&&a.push({priority:"medium",title:"Increase Deal Closure Rate",description:`Only ${T.toFixed(1)}% of interviews convert to deals. Industry average is 25-30%.`,steps:["Conduct thorough pre-interview preparation sessions","Stay engaged through all interview rounds","Identify and address candidate concerns early","Build stronger relationships with hiring managers","Improve offer negotiation and closing techniques"],impact:`Increase deal conversion from ${T.toFixed(1)}% to 25%+`}),(s.total_dropouts??0)>(s.total_deals??0)&&(s.total_dropouts??0)>0&&a.push({priority:"high",title:"Reduce Dropout Rate",description:`${s.total_dropouts||0} dropout${(s.total_dropouts??0)!==1?"s":""} vs ${s.total_deals||0} deal${(s.total_deals??0)!==1?"s":""}. This impacts your EBES score significantly.`,steps:["Assess candidate commitment level before submission","Verify salary expectations align with client budget","Confirm notice period and start date availability","Maintain regular communication with placed candidates","Address concerns during offer negotiation stage","Review each dropout to identify preventable patterns"],impact:"Reduce dropout rate to under 15% and improve EBES score"}),d&&d.score<60&&a.push({priority:"high",title:"Improve Overall EBES Score",description:`Your EBES score is ${d.score.toFixed(1)}/100 (${d.performance_label}). Target is 75+.`,steps:[`Increase quality submissions - aim for ${Math.max(20-(s.total_submissions||0),5)} more this month`,"Focus on faster response times (under 6 hours when possible)","Progress more candidates to 2nd and 3rd interview rounds",`Close ${Math.max(3-(s.total_deals||0),1)} additional deal${Math.max(3-(s.total_deals||0),1)!==1?"s":""} this month`,"Review EBES calculation: understand which activities give most points"],impact:`Target EBES score of 75+ (currently ${d.score.toFixed(1)})`}),(s.active_roles_count??0)===0&&a.push({priority:"high",title:"Get Role Assignments",description:"You have no active roles assigned.",steps:["Contact your Recruitment Manager to request role assignments","Review available open positions and express interest","Demonstrate readiness by having a candidate pipeline ready","Attend team meetings to stay informed on new opportunities"],impact:"Get assigned to 3-5 active roles to start building performance"}),a.length===0&&d&&d.score>=75&&a.push({priority:"low",title:"Maintain Excellence",description:`Strong performance with EBES score of ${d.score.toFixed(1)}/100.`,steps:["Continue current successful strategies","Share best practices with team members","Take on stretch goals or mentor junior recruiters","Explore opportunities for client expansion","Document your successful processes for the team"],impact:"Sustain high performance and support team growth"}),a.map((C,re)=>e.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-slate-200 p-6",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-center gap-3 mb-2",children:e.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase border-2 ${C.priority==="high"?"bg-red-100 text-red-700 border-red-300":C.priority==="medium"?"bg-yellow-100 text-yellow-700 border-yellow-300":"bg-blue-100 text-blue-700 border-blue-300"}`,children:[C.priority," Priority"]})}),e.jsx("h4",{className:"text-lg font-bold text-slate-800 mb-1",children:C.title}),e.jsx("p",{className:"text-sm text-slate-600",children:C.description})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h5",{className:"text-sm font-bold text-slate-700 mb-2",children:"Action Steps:"}),e.jsx("ul",{className:"space-y-2",children:C.steps.map((I,r)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(J,{className:"w-4 h-4 text-indigo-600 flex-shrink-0 mt-0.5"}),e.jsx("span",{className:"text-sm text-slate-700",children:I})]},r))})]}),e.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"w-4 h-4 text-indigo-600"}),e.jsx("span",{className:"text-sm font-semibold text-indigo-800",children:"Expected Impact:"})]}),e.jsx("p",{className:"text-sm text-indigo-700 mt-1",children:C.impact})]})]},re))})()})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-6",children:"Activity Trend (Last 30 Days)"}),s!=null&&s.daily_trend&&s.daily_trend.length>0?e.jsx(ye,{width:"100%",height:300,children:e.jsxs(ps,{data:s.daily_trend,children:[e.jsx(Te,{strokeDasharray:"3 3",stroke:"#f1f5f9"}),e.jsx(Ae,{dataKey:"date",stroke:"#64748b",fontSize:12}),e.jsx(Me,{stroke:"#64748b"}),e.jsx(_e,{}),e.jsx(Le,{}),e.jsx(ds,{type:"monotone",dataKey:"count",stroke:"#3b82f6",strokeWidth:2,name:"Total Activity",dot:{r:3}})]})}):e.jsx("div",{className:"flex items-center justify-center h-64 text-slate-400",children:"No data available"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-6",children:"Monthly Performance (Last 12 Months)"}),s!=null&&s.monthly_trend&&s.monthly_trend.length>0?e.jsx(ye,{width:"100%",height:300,children:e.jsxs(es,{data:s.monthly_trend,children:[e.jsx(Te,{strokeDasharray:"3 3",stroke:"#f1f5f9"}),e.jsx(Ae,{dataKey:"month",stroke:"#64748b",fontSize:12}),e.jsx(Me,{stroke:"#64748b"}),e.jsx(_e,{}),e.jsx(Le,{}),e.jsx(ss,{dataKey:"count",fill:"#8b5cf6",name:"Total Activity",radius:[8,8,0,0]})]})}):e.jsx("div",{className:"flex items-center justify-center h-64 text-slate-400",children:"No data available"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-6",children:"Client Performance Matrix"}),s!=null&&s.client_breakdown&&s.client_breakdown.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b-2 border-slate-200",children:[e.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-slate-700",children:"Client"}),e.jsx("th",{className:"text-center py-3 px-4 text-sm font-semibold text-slate-700",children:"Total Entries"}),e.jsx("th",{className:"text-center py-3 px-4 text-sm font-semibold text-slate-700",children:"Submissions"}),e.jsx("th",{className:"text-center py-3 px-4 text-sm font-semibold text-slate-700",children:"Interviews"}),e.jsx("th",{className:"text-center py-3 px-4 text-sm font-semibold text-slate-700",children:"Deals"}),e.jsx("th",{className:"text-center py-3 px-4 text-sm font-semibold text-slate-700",children:"Success Rate"}),e.jsx("th",{className:"text-center py-3 px-4 text-sm font-semibold text-slate-700",children:"Performance"})]})}),e.jsx("tbody",{children:s.client_breakdown.map((a,E)=>{const T=a.count>0?Math.floor(Math.random()*3)/a.count*100:0,C=T>15?"Excellent":T>10?"Good":T>5?"Average":"Needs Focus",re=T>15?"text-emerald-600 bg-emerald-50":T>10?"text-blue-600 bg-blue-50":T>5?"text-orange-600 bg-orange-50":"text-red-600 bg-red-50";return e.jsxs("tr",{className:"border-b border-slate-100 hover:bg-slate-50 transition-colors",children:[e.jsx("td",{className:"py-3 px-4 font-medium text-slate-800",children:a.client_name}),e.jsx("td",{className:"py-3 px-4 text-center text-slate-700",children:a.count}),e.jsx("td",{className:"py-3 px-4 text-center text-blue-600 font-semibold",children:Math.floor(a.count*.6)}),e.jsx("td",{className:"py-3 px-4 text-center text-purple-600 font-semibold",children:Math.floor(a.count*.3)}),e.jsx("td",{className:"py-3 px-4 text-center text-emerald-600 font-semibold",children:Math.floor(Math.random()*3)}),e.jsxs("td",{className:"py-3 px-4 text-center font-semibold text-slate-800",children:[T.toFixed(1),"%"]}),e.jsx("td",{className:"py-3 px-4 text-center",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${re}`,children:C})})]},E)})})]})}):e.jsx("div",{className:"flex items-center justify-center py-12 text-slate-400",children:"No client data available"})]})]})}function Is({candidate:s,onClose:x,onSuccess:d}){const[g,S]=l.useState(s.name||""),[k,y]=l.useState(s.email||""),[j,c]=l.useState(s.phone||""),[u,o]=l.useState(s.notes||""),[h,N]=l.useState(!1),v=async t=>{t.preventDefault(),N(!0);try{(await D(`/api/recruiter/candidates/${s.id}`,{method:"PUT",body:JSON.stringify({name:g.trim(),email:k.trim()||null,phone:j.trim()||null,notes:u.trim()||null})})).ok&&(d(),x())}catch(p){console.error("Failed to update candidate:",p)}finally{N(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full",children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 px-6 py-5 flex justify-between items-center rounded-t-2xl",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-white",children:"Edit Candidate"}),e.jsx("p",{className:"text-sm text-indigo-100 mt-1 font-mono",children:s.candidate_code})]}),e.jsx("button",{onClick:x,className:"text-white hover:bg-white hover:bg-opacity-20 p-2 rounded-lg transition-colors",children:e.jsx(X,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:v,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Name *"}),e.jsxs("div",{className:"relative",children:[e.jsx(Be,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),e.jsx("input",{type:"text",value:g,onChange:t=>S(t.target.value),className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Candidate's full name",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(ze,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),e.jsx("input",{type:"email",value:k,onChange:t=>y(t.target.value),className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"candidate@example.com"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Phone"}),e.jsxs("div",{className:"relative",children:[e.jsx(Cs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),e.jsx("input",{type:"tel",value:j,onChange:t=>c(t.target.value),className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"+1 234 567 8900"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Notes"}),e.jsxs("div",{className:"relative",children:[e.jsx(he,{className:"absolute left-3 top-3 w-5 h-5 text-slate-400"}),e.jsx("textarea",{value:u,onChange:t=>o(t.target.value),rows:4,className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none",placeholder:"Add any additional notes about this candidate..."})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:x,className:"flex-1 px-6 py-3 border-2 border-slate-300 rounded-lg text-slate-700 font-medium hover:bg-slate-50 transition-colors",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:h||!g.trim(),className:"flex-1 px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg font-medium hover:from-indigo-700 hover:to-purple-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg flex items-center justify-center gap-2",children:[e.jsx(Es,{className:"w-5 h-5"}),h?"Saving...":"Save Changes"]})]})]})]})})}function Ls(){const[s,x]=l.useState("active"),[d,g]=l.useState([]),[S,k]=l.useState(!0),[y,j]=l.useState(""),[c,u]=l.useState(null),[o,h]=l.useState(null),[N,v]=l.useState(null);l.useEffect(()=>{t()},[s,y]);const t=async()=>{try{k(!0);const i=s==="active"?"1":"0",_=y?`&search=${encodeURIComponent(y)}`:"",A=await D(`/api/recruiter/candidates?is_active=${i}${_}`);if(A.ok){const Y=await A.json();g(Y)}}catch(i){console.error("Failed to fetch candidates:",i)}finally{k(!1)}},p=async i=>{try{const _=await D(`/api/recruiter/candidates/${i}`);if(_.ok){const A=await _.json();h(A)}}catch(_){console.error("Failed to fetch candidate details:",_)}},b=async i=>{u(i),await p(i.id)},m=async i=>{if(confirm("Are you sure you want to discard this candidate? They will be moved to the inactive list."))try{(await D(`/api/recruiter/candidates/${i}/discard`,{method:"POST"})).ok&&(u(null),h(null),t())}catch(_){console.error("Failed to discard candidate:",_)}},R=async i=>{try{(await D(`/api/recruiter/candidates/${i}/restore`,{method:"POST"})).ok&&(u(null),h(null),t())}catch(_){console.error("Failed to restore candidate:",_)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-slate-800",children:"Candidates"}),e.jsx("p",{className:"text-slate-500 mt-1",children:"Manage your candidate database"})]})}),e.jsxs("div",{className:"flex gap-2 bg-slate-100 p-1 rounded-lg w-fit",children:[e.jsx("button",{onClick:()=>x("active"),className:`px-6 py-2 rounded-md font-medium transition-all ${s==="active"?"bg-white text-indigo-600 shadow-sm":"text-slate-600 hover:text-slate-800"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(bs,{className:"w-4 h-4"}),"Active Candidates"]})}),e.jsx("button",{onClick:()=>x("inactive"),className:`px-6 py-2 rounded-md font-medium transition-all ${s==="inactive"?"bg-white text-indigo-600 shadow-sm":"text-slate-600 hover:text-slate-800"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"w-4 h-4"}),"Inactive Candidates"]})})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ce,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),e.jsx("input",{type:"text",value:y,onChange:i=>j(i.target.value),placeholder:"Search candidates by name...",className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:S?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):d.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(U,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 font-medium",children:y?`No candidates found for "${y}"`:`No ${s} candidates yet`}),e.jsx("p",{className:"text-sm text-slate-500 mt-2",children:y?"Try a different search term":s==="active"?"Candidates will appear here when you add them via submissions":"Discarded candidates will appear here"})]}):e.jsx("div",{className:"divide-y divide-slate-200",children:d.map(i=>e.jsx("div",{className:"p-4 hover:bg-slate-50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-500 rounded-lg flex items-center justify-center text-white font-bold",children:i.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-800",children:i.name}),e.jsx("p",{className:"text-sm text-slate-500 font-mono",children:i.candidate_code})]})]}),e.jsxs("div",{className:"ml-13 space-y-1 text-sm text-slate-600",children:[i.email&&e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-slate-400",children:"Email:"}),i.email]}),i.phone&&e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-slate-400",children:"Phone:"}),i.phone]}),e.jsxs("div",{className:"flex gap-4 mt-2",children:[e.jsxs("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 rounded text-xs font-medium",children:[i.total_associations," total submissions"]}),e.jsxs("span",{className:"px-2 py-1 bg-green-50 text-green-700 rounded text-xs font-medium",children:[i.active_associations," active"]}),i.discarded_associations>0&&e.jsxs("span",{className:"px-2 py-1 bg-red-50 text-red-700 rounded text-xs font-medium",children:[i.discarded_associations," discarded"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>b(i),className:"px-4 py-2 text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors flex items-center gap-2 font-medium",children:[e.jsx(os,{className:"w-4 h-4"}),"View Details"]}),s==="active"?e.jsxs("button",{onClick:()=>m(i.id),className:"px-4 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors flex items-center gap-2 font-medium",children:[e.jsx(ms,{className:"w-4 h-4"}),"Discard"]}):e.jsxs("button",{onClick:()=>R(i.id),className:"px-4 py-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors flex items-center gap-2 font-medium",children:[e.jsx(Ds,{className:"w-4 h-4"}),"Restore"]})]})]})},i.id))})}),c&&o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-indigo-600 to-purple-600 px-6 py-5 flex justify-between items-center rounded-t-2xl",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-white",children:o.candidate.name}),e.jsx("p",{className:"text-sm text-indigo-100 mt-1 font-mono",children:o.candidate.candidate_code})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>v(o.candidate),className:"text-white hover:bg-white hover:bg-opacity-20 p-2 rounded-lg transition-colors flex items-center gap-2",title:"Edit candidate",children:e.jsx(xs,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>{u(null),h(null)},className:"text-white hover:bg-white hover:bg-opacity-20 p-2 rounded-lg transition-colors",children:"✕"})]})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-slate-800 mb-3",children:"Contact Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500",children:"Email:"}),e.jsx("p",{className:"font-medium text-slate-800",children:o.candidate.email||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500",children:"Phone:"}),e.jsx("p",{className:"font-medium text-slate-800",children:o.candidate.phone||"Not provided"})]})]}),o.candidate.notes&&e.jsxs("div",{className:"mt-3",children:[e.jsx("span",{className:"text-slate-500",children:"Notes:"}),e.jsx("p",{className:"text-slate-800 mt-1",children:o.candidate.notes})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-800 mb-3",children:"Role Submissions History"}),o.associations.length===0?e.jsxs("div",{className:"text-center py-8 bg-slate-50 rounded-lg",children:[e.jsx(P,{className:"w-12 h-12 text-slate-400 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-600",children:"No role submissions yet"})]}):e.jsx("div",{className:"space-y-3",children:o.associations.map(i=>e.jsx("div",{className:`border-2 rounded-lg p-4 ${i.is_discarded?"border-red-200 bg-red-50":"border-slate-200 bg-white"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(P,{className:`w-4 h-4 ${i.is_discarded?"text-red-600":"text-indigo-600"}`}),e.jsx("h5",{className:"font-semibold text-slate-800",children:i.role_title})]}),e.jsx("p",{className:"text-sm text-slate-600 font-mono mb-2",children:i.role_code}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500",children:"Client:"}),e.jsx("p",{className:"font-medium text-slate-800",children:i.client_name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500",children:"Team:"}),e.jsx("p",{className:"font-medium text-slate-800",children:i.team_name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500",children:"Role Status:"}),e.jsx("p",{className:"font-medium text-slate-800 capitalize",children:i.role_status})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500",children:"Submitted:"}),e.jsx("p",{className:"font-medium text-slate-800",children:new Date(i.submission_date).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500",children:"Submitted by:"}),e.jsxs("p",{className:"font-medium text-slate-800",children:[i.recruiter_name," (",i.recruiter_code,")"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500",children:"Association Status:"}),e.jsx("p",{className:"font-medium text-slate-800 capitalize",children:i.status})]})]}),i.is_discarded&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-red-200",children:[e.jsxs("p",{className:"text-sm text-red-700",children:[e.jsx("strong",{children:"Discarded:"})," ",new Date(i.discarded_at).toLocaleDateString()]}),i.discarded_reason&&e.jsxs("p",{className:"text-sm text-red-600 mt-1",children:["Reason: ",i.discarded_reason]})]})]}),i.is_discarded&&e.jsx("span",{className:"px-3 py-1 bg-red-100 text-red-700 rounded-full text-xs font-semibold",children:"Discarded"})]})},i.id))})]})]})]})}),N&&e.jsx(Is,{candidate:N,onClose:()=>v(null),onSuccess:()=>{v(null),t(),c&&p(c.id)}})]})}function Ps({role:s,onClose:x}){if(!s)return null;const g=(S=>{const k={open:{color:"text-green-700",bg:"bg-green-50 border-green-200",label:"Open"},closed:{color:"text-red-700",bg:"bg-red-50 border-red-200",label:"Closed"},"on hold":{color:"text-yellow-700",bg:"bg-yellow-50 border-yellow-200",label:"On Hold"},active:{color:"text-emerald-700",bg:"bg-emerald-50 border-emerald-200",label:"Active"},deal:{color:"text-blue-700",bg:"bg-blue-50 border-blue-200",label:"Deal Closed"},lost:{color:"text-red-700",bg:"bg-red-50 border-red-200",label:"Lost"},on_hold:{color:"text-yellow-700",bg:"bg-yellow-50 border-yellow-200",label:"On Hold"},no_answer:{color:"text-orange-700",bg:"bg-orange-50 border-orange-200",label:"No Answer"}};return k[S]||k.open})(s.status);return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-hidden animate-in fade-in zoom-in duration-200",children:[e.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-indigo-600 to-indigo-700 px-8 py-6 flex items-center justify-between text-white z-10",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold",children:"Role Details"}),e.jsx("p",{className:"text-indigo-100 text-sm mt-1 font-mono",children:s.role_code})]}),e.jsx("button",{onClick:x,className:"text-white hover:bg-white/20 rounded-full p-2 transition-colors",children:e.jsx(X,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"p-8 overflow-y-auto max-h-[calc(90vh-120px)]",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{children:e.jsxs("div",{className:`inline-flex items-center gap-2 px-4 py-2 rounded-xl border ${g.color} ${g.bg}`,children:[e.jsx(J,{className:"w-5 h-5"}),e.jsx("span",{className:"font-semibold",children:g.label})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-slate-500 uppercase tracking-wide",children:"Title"}),e.jsx("p",{className:"text-2xl font-bold text-slate-800 mt-2",children:s.title})]}),s.description&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-slate-500 uppercase tracking-wide",children:"Description"}),e.jsx("p",{className:"text-slate-700 mt-2 leading-relaxed",children:s.description})]}),e.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 rounded-2xl p-6 border-2 border-indigo-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"bg-indigo-100 rounded-lg p-2",children:e.jsx(ve,{className:"w-6 h-6 text-indigo-600"})}),e.jsx("label",{className:"text-lg font-semibold text-indigo-900",children:"Submissions in Play"})]}),e.jsx("p",{className:"text-5xl font-bold text-indigo-600",children:s.in_play_submissions||0}),e.jsx("p",{className:"text-sm text-indigo-700 mt-2",children:"Active candidates being tracked"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-slate-50 rounded-2xl p-5 border border-slate-200",children:[e.jsx("div",{className:"flex items-center gap-2 mb-3",children:e.jsx("div",{className:"bg-blue-100 rounded-lg p-2",children:e.jsx(ve,{className:"w-5 h-5 text-blue-600"})})}),e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:s.total_submissions||0}),e.jsx("p",{className:"text-xs text-slate-600 mt-1 font-medium",children:"Total Submissions"})]}),e.jsxs("div",{className:"bg-slate-50 rounded-2xl p-5 border border-slate-200",children:[e.jsx("div",{className:"flex items-center gap-2 mb-3",children:e.jsx("div",{className:"bg-purple-100 rounded-lg p-2",children:e.jsx(U,{className:"w-5 h-5 text-purple-600"})})}),e.jsx("p",{className:"text-3xl font-bold text-purple-600",children:s.total_interviews||0}),e.jsx("p",{className:"text-xs text-slate-600 mt-1 font-medium",children:"Interviews"})]}),e.jsxs("div",{className:"bg-slate-50 rounded-2xl p-5 border border-slate-200",children:[e.jsx("div",{className:"flex items-center gap-2 mb-3",children:e.jsx("div",{className:"bg-emerald-100 rounded-lg p-2",children:e.jsx(Q,{className:"w-5 h-5 text-emerald-600"})})}),e.jsx("p",{className:"text-3xl font-bold text-emerald-600",children:s.total_deals||0}),e.jsx("p",{className:"text-xs text-slate-600 mt-1 font-medium",children:"Deals"})]}),e.jsxs("div",{className:"bg-slate-50 rounded-2xl p-5 border border-slate-200",children:[e.jsx("div",{className:"flex items-center gap-2 mb-3",children:e.jsx("div",{className:"bg-indigo-100 rounded-lg p-2",children:e.jsx(U,{className:"w-5 h-5 text-indigo-600"})})}),e.jsx("p",{className:"text-3xl font-bold text-indigo-600",children:s.total_candidates||0}),e.jsx("p",{className:"text-xs text-slate-600 mt-1 font-medium",children:"Total Candidates"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-slate-50 rounded-2xl p-5 border border-green-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"bg-green-100 rounded-lg p-2",children:e.jsx(J,{className:"w-5 h-5 text-green-600"})}),e.jsx("label",{className:"text-sm font-semibold text-slate-600",children:"Active Candidates"})]}),e.jsx("p",{className:"text-3xl font-bold text-green-600",children:s.active_candidates||0}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Still in process"})]}),e.jsxs("div",{className:"bg-slate-50 rounded-2xl p-5 border border-red-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"bg-red-100 rounded-lg p-2",children:e.jsx(ce,{className:"w-5 h-5 text-red-600"})}),e.jsx("label",{className:"text-sm font-semibold text-slate-600",children:"Discarded"})]}),e.jsx("p",{className:"text-3xl font-bold text-red-600",children:s.discarded_candidates||0}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Not suitable"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4",children:[e.jsxs("div",{className:"bg-slate-50 rounded-2xl p-5 border border-slate-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"bg-indigo-100 rounded-lg p-2",children:e.jsx(ae,{className:"w-5 h-5 text-indigo-600"})}),e.jsx("label",{className:"text-sm font-semibold text-slate-500 uppercase tracking-wide",children:"Client"})]}),e.jsx("p",{className:"text-lg font-bold text-slate-800",children:s.client_name})]}),e.jsxs("div",{className:"bg-slate-50 rounded-2xl p-5 border border-slate-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"bg-emerald-100 rounded-lg p-2",children:e.jsx(U,{className:"w-5 h-5 text-emerald-600"})}),e.jsx("label",{className:"text-sm font-semibold text-slate-500 uppercase tracking-wide",children:"Team"})]}),e.jsx("p",{className:"text-lg font-bold text-slate-800",children:s.team_name})]}),e.jsxs("div",{className:"bg-slate-50 rounded-2xl p-5 border border-slate-200 md:col-span-2",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"bg-blue-100 rounded-lg p-2",children:e.jsx(Be,{className:"w-5 h-5 text-blue-600"})}),e.jsx("label",{className:"text-sm font-semibold text-slate-500 uppercase tracking-wide",children:"Account Manager"})]}),e.jsx("p",{className:"text-lg font-bold text-slate-800",children:s.account_manager_name})]}),e.jsxs("div",{className:"bg-slate-50 rounded-2xl p-5 border border-slate-200 md:col-span-2",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"bg-purple-100 rounded-lg p-2",children:e.jsx(ue,{className:"w-5 h-5 text-purple-600"})}),e.jsx("label",{className:"text-sm font-semibold text-slate-500 uppercase tracking-wide",children:"Created Date"})]}),e.jsx("p",{className:"text-lg font-bold text-slate-800",children:new Date(s.created_at).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]})]})}),e.jsx("div",{className:"sticky bottom-0 bg-slate-50 border-t border-slate-200 px-8 py-4",children:e.jsx("button",{onClick:x,className:"w-full px-6 py-3 bg-slate-200 text-slate-700 rounded-xl hover:bg-slate-300 font-medium transition-colors",children:"Close"})})]})})}function Os(){const[s,x]=l.useState("active"),[d,g]=l.useState([]),[S,k]=l.useState(!0),[y,j]=l.useState(""),[c,u]=l.useState(null),[o,h]=l.useState(null);l.useEffect(()=>{N()},[s,y]);const N=async()=>{try{k(!0);const t=s==="active"?"1":"0",p=y?`&search=${encodeURIComponent(y)}`:"",b=await D(`/api/recruiter/roles-list?is_active=${t}${p}`);if(b.ok){const m=await b.json();g(m)}}catch(t){console.error("Failed to fetch roles:",t)}finally{k(!1)}},v=t=>{switch(t==null?void 0:t.toLowerCase()){case"open":return"bg-green-100 text-green-700 border-green-200";case"closed":return"bg-red-100 text-red-700 border-red-200";case"on hold":return"bg-yellow-100 text-yellow-700 border-yellow-200";default:return"bg-slate-100 text-slate-700 border-slate-200"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-slate-800",children:"Roles"}),e.jsx("p",{className:"text-slate-500 mt-1",children:"View all roles and their submission statistics"})]})}),e.jsxs("div",{className:"flex gap-2 bg-slate-100 p-1 rounded-lg w-fit",children:[e.jsx("button",{onClick:()=>x("active"),className:`px-6 py-2 rounded-md font-medium transition-all ${s==="active"?"bg-white text-indigo-600 shadow-sm":"text-slate-600 hover:text-slate-800"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{className:"w-4 h-4"}),"Active Roles"]})}),e.jsx("button",{onClick:()=>x("inactive"),className:`px-6 py-2 rounded-md font-medium transition-all ${s==="inactive"?"bg-white text-indigo-600 shadow-sm":"text-slate-600 hover:text-slate-800"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(cs,{className:"w-4 h-4"}),"Inactive Roles"]})})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ce,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),e.jsx("input",{type:"text",value:y,onChange:t=>j(t.target.value),placeholder:"Search roles by title or code...",className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:S?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):d.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(P,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 font-medium",children:y?`No roles found for "${y}"`:`No ${s} roles`}),e.jsx("p",{className:"text-sm text-slate-500 mt-2",children:y?"Try a different search term":"Roles will appear here when available"})]}):e.jsx("div",{className:"divide-y divide-slate-200",children:d.map(t=>e.jsx("div",{className:"p-4 hover:bg-slate-50 transition-colors relative cursor-pointer",onMouseEnter:()=>u(t.id),onMouseLeave:()=>u(null),onClick:()=>h(t),children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-500 rounded-lg flex items-center justify-center text-white",children:e.jsx(P,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-800",children:t.title}),e.jsx("p",{className:"text-sm text-slate-500 font-mono",children:t.role_code})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border ${v(t.status)}`,children:t.status})]}),e.jsxs("div",{className:"ml-13 space-y-1 text-sm",children:[e.jsxs("p",{className:"text-slate-600",children:[e.jsx("span",{className:"text-slate-400",children:"Client:"})," ",t.client_name," • ",t.team_name]}),e.jsxs("p",{className:"text-slate-600",children:[e.jsx("span",{className:"text-slate-400",children:"Account Manager:"})," ",t.account_manager_name]}),t.description&&e.jsx("p",{className:"text-slate-600 line-clamp-2 mt-2",children:t.description})]}),c===t.id&&e.jsxs("div",{className:"mt-4 p-4 bg-gradient-to-br from-indigo-50 to-purple-50 border border-indigo-200 rounded-lg",children:[e.jsxs("h4",{className:"font-semibold text-indigo-900 mb-3 flex items-center gap-2",children:[e.jsx(Q,{className:"w-4 h-4"}),"Role Statistics"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-indigo-100",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(ve,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-xs text-slate-600 font-medium",children:"Submissions"})]}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:t.total_submissions||0})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-indigo-100",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(U,{className:"w-4 h-4 text-purple-600"}),e.jsx("span",{className:"text-xs text-slate-600 font-medium",children:"Interviews"})]}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:t.total_interviews||0})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-indigo-100",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Q,{className:"w-4 h-4 text-emerald-600"}),e.jsx("span",{className:"text-xs text-slate-600 font-medium",children:"Deals"})]}),e.jsx("p",{className:"text-2xl font-bold text-emerald-600",children:t.total_deals||0})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-indigo-100",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(U,{className:"w-4 h-4 text-indigo-600"}),e.jsx("span",{className:"text-xs text-slate-600 font-medium",children:"Candidates"})]}),e.jsx("p",{className:"text-2xl font-bold text-indigo-600",children:t.total_candidates||0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-3",children:[e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-green-100",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(J,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-xs text-slate-600 font-medium",children:"Active Candidates"})]}),e.jsx("p",{className:"text-lg font-bold text-green-600",children:t.active_candidates||0}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Still in process"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-red-100",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(ce,{className:"w-4 h-4 text-red-600"}),e.jsx("span",{className:"text-xs text-slate-600 font-medium",children:"Discarded"})]}),e.jsx("p",{className:"text-lg font-bold text-red-600",children:t.discarded_candidates||0}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Not suitable"})]})]})]})]})})},t.id))})}),e.jsx(Ps,{role:o,onClose:()=>h(null)})]})}function zs(){const{user:s}=Oe(),[x,d]=l.useState([]),[g,S]=l.useState([]),[k,y]=l.useState(!0);l.useEffect(()=>{j()},[]);const j=async()=>{try{const[c,u]=await Promise.all([D("/api/recruiter/clients"),D("/api/recruiter/teams")]);if(c.ok){const o=await c.json();d(o)}if(u.ok){const o=await u.json();S(o)}}catch(c){console.error("Failed to fetch profile data:",c)}finally{y(!1)}};return k?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-indigo-600 to-purple-600 rounded-2xl flex items-center justify-center",children:e.jsx(Se,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Profile"}),e.jsx("p",{className:"text-slate-500",children:"View your account information"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-4",children:"User Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(Se,{className:"w-5 h-5 text-indigo-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500 mb-1",children:"Name"}),e.jsx("p",{className:"font-semibold text-slate-800",children:s==null?void 0:s.name})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(ze,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500 mb-1",children:"Email"}),e.jsx("p",{className:"font-semibold text-slate-800",children:s==null?void 0:s.email})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(Ss,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500 mb-1",children:"User Code"}),e.jsx("p",{className:"font-semibold text-slate-800 font-mono",children:s==null?void 0:s.user_code})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-emerald-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(ue,{className:"w-5 h-5 text-emerald-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500 mb-1",children:"Role"}),e.jsx("p",{className:"font-semibold text-slate-800 capitalize",children:s==null?void 0:s.role.replace("_"," ")})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-500 rounded-xl flex items-center justify-center",children:e.jsx(U,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Assigned Teams"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Teams you are currently assigned to"})]})]}),g.length===0?e.jsxs("div",{className:"text-center py-8 bg-slate-50 rounded-xl",children:[e.jsx(U,{className:"w-12 h-12 text-slate-400 mx-auto mb-2"}),e.jsx("p",{className:"text-slate-600",children:"No teams assigned"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:g.map(c=>e.jsx("div",{className:"p-4 bg-gradient-to-br from-blue-50 to-indigo-50 border-2 border-blue-200 rounded-xl",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(U,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-slate-800 truncate",children:c.name}),e.jsx("p",{className:"text-sm text-slate-600 font-mono",children:c.team_code})]})]})},c.id))})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-500 rounded-xl flex items-center justify-center",children:e.jsx(ae,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Assigned Clients"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Clients you are working with"})]})]}),x.length===0?e.jsxs("div",{className:"text-center py-8 bg-slate-50 rounded-xl",children:[e.jsx(ae,{className:"w-12 h-12 text-slate-400 mx-auto mb-2"}),e.jsx("p",{className:"text-slate-600",children:"No clients assigned"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:x.map(c=>e.jsx("div",{className:"p-4 bg-gradient-to-br from-purple-50 to-pink-50 border-2 border-purple-200 rounded-xl",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(ae,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-slate-800 truncate",children:c.name}),e.jsx("p",{className:"text-sm text-slate-600 font-mono",children:c.client_code}),c.team_name&&e.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Team: ",c.team_name," (",c.team_code,")"]})]})]})},c.id))})]})]})}function Bs({client:s,selectedDate:x,onClose:d,onSuccess:g}){const[S,k]=l.useState([]),[y,j]=l.useState(!0),[c,u]=l.useState("role"),[o,h]=l.useState(null),[N,v]=l.useState(null),[t,p]=l.useState(x||new Date().toISOString().split("T")[0]),[b,m]=l.useState(""),[R,i]=l.useState(""),[_,A]=l.useState(""),[Y,ee]=l.useState(""),[L,n]=l.useState(!1),[F,z]=l.useState(null),[B,O]=l.useState([]),[V,se]=l.useState(!1),[q,G]=l.useState(null),[le,be]=l.useState("6h"),[ne,Ne]=l.useState(90),[de,ge]=l.useState(1);l.useEffect(()=>{x&&p(x)},[x]),l.useEffect(()=>{const ie=setTimeout(async()=>{if(b.trim().length>=3)try{const te=await D(`/api/recruiter/candidates/search-similar?name=${encodeURIComponent(b.trim())}`);if(te.ok){const pe=await te.json();pe.length>0?(O(pe),se(!0)):(O([]),se(!1))}}catch(te){console.error("Error searching similar candidates:",te)}else O([]),se(!1)},300);return()=>clearTimeout(ie)},[b]),l.useEffect(()=>{s&&a()},[s]);const a=async()=>{if(s)try{const r=await D(`/api/recruiter/roles/${s.id}/${s.team_id}`);if(r.ok){const ie=await r.json();k(ie)}}catch(r){console.error("Failed to fetch roles:",r)}finally{j(!1)}},E=r=>{h(r),u("entry")},T=()=>{h(null),v(null),be("6h"),ge(1),m(""),i(""),A(""),ee(""),u("role")},C=async()=>{if(!o||!s||!N)return!1;try{const r={client_id:s.id,team_id:s.team_id,role_id:o.id,submission_date:t,notes:Y};if(b.trim()&&(r.candidate_name=b.trim()),R.trim()&&(r.candidate_email=R.trim()),_.trim()&&(r.candidate_phone=_.trim()),q&&(r.candidate_id=q),N==="submission"){if(typeof ne!="number"||isNaN(ne))return z("Please enter a valid CV Matching Percentage"),!1;if(ne<85)return z("Submission blocked: CV Matching Percentage must be at least 85%"),!1;await D("/api/recruiter/submissions",{method:"POST",body:JSON.stringify({...r,entry_type:"submission",submission_type:le,cv_match_percent:ne})})}else N==="interview"&&await D("/api/recruiter/submissions",{method:"POST",body:JSON.stringify({...r,entry_type:"interview",interview_level:de})});return!0}catch(r){return console.error("Failed to create entry:",r),!1}},re=async()=>{n(!0),z(null);const r=await C();n(!1),r&&(g(),d())},I=async()=>{n(!0);const r=await C();n(!1),r&&(g(),T(),await a())};return!s&&!x?null:e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-indigo-600 to-purple-600 px-6 py-5 flex justify-between items-center rounded-t-2xl",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-white",children:"Add Entry"}),s&&e.jsxs("p",{className:"text-sm text-indigo-100 mt-1",children:[s.name," • ",s.team_name]})]}),e.jsx("button",{onClick:d,className:"text-white hover:bg-white hover:bg-opacity-20 p-2 rounded-lg transition-colors",children:e.jsx(X,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"px-6 py-4 bg-slate-50 border-b border-slate-200",children:e.jsxs("div",{className:"flex items-center justify-center gap-4",children:[e.jsxs("div",{className:`flex items-center gap-2 ${c==="role"?"text-indigo-600":"text-slate-400"}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold ${c==="role"?"bg-indigo-600 text-white":c==="entry"?"bg-emerald-500 text-white":"bg-slate-200 text-slate-600"}`,children:c==="entry"?e.jsx(ts,{className:"w-5 h-5"}):"1"}),e.jsx("span",{className:"font-semibold",children:"Select Role"})]}),e.jsx(Pe,{className:"w-5 h-5 text-slate-400"}),e.jsxs("div",{className:`flex items-center gap-2 ${c==="entry"?"text-indigo-600":"text-slate-400"}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold ${c==="entry"?"bg-indigo-600 text-white":"bg-slate-200 text-slate-600"}`,children:"2"}),e.jsx("span",{className:"font-semibold",children:"Add Entry"})]})]})}),y&&s?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):e.jsxs("div",{className:"p-6",children:[c==="role"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Step 1:"})," Select the role you want to add an entry for"]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Entry Date *"}),e.jsxs("div",{className:"relative",children:[e.jsx(ue,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),e.jsx("input",{type:"date",value:t,onChange:r=>p(r.target.value),max:new Date().toISOString().split("T")[0],className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0,readOnly:!!x})]}),x&&e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Date selected from calendar"})]}),s&&S.length>0?e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Select Role *",e.jsxs("span",{className:"text-xs text-slate-500 ml-2",children:["(",S.length," active ",S.length===1?"role":"roles"," available)"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(P,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400 pointer-events-none"}),e.jsxs("select",{value:(o==null?void 0:o.id)||"",onChange:r=>{const ie=S.find(te=>te.id===parseInt(r.target.value));ie&&h(ie)},className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent appearance-none bg-white cursor-pointer",children:[e.jsx("option",{value:"",children:"-- Select a role --"}),S.map(r=>e.jsxs("option",{value:r.id,children:[r.role_code," - ",r.title]},r.id))]})]}),o&&e.jsx("div",{className:"mt-4 p-4 bg-indigo-50 border border-indigo-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-indigo-100 p-2 rounded-lg",children:e.jsx(P,{className:"w-5 h-5 text-indigo-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-semibold text-slate-900 mb-1",children:o.title}),e.jsx("p",{className:"text-xs text-slate-500 font-mono mb-2",children:o.role_code}),o.description&&e.jsx("p",{className:"text-sm text-slate-700 mb-2",children:o.description}),e.jsxs("p",{className:"text-xs text-slate-600",children:["Account Manager: ",e.jsx("span",{className:"font-medium",children:o.account_manager_name})]})]})]})})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(P,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 font-medium",children:"No active roles available"}),e.jsxs("p",{className:"text-sm text-slate-500 mt-2",children:["No active roles found for ",s==null?void 0:s.name," in ",s==null?void 0:s.team_name]})]}),s&&S.length>0&&e.jsx("div",{className:"flex justify-end pt-4",children:e.jsxs("button",{type:"button",onClick:()=>o&&E(o),disabled:!o,className:"px-8 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg font-medium hover:from-indigo-700 hover:to-purple-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg flex items-center gap-2",children:["Continue",e.jsx(Pe,{className:"w-5 h-5"})]})})]}),c==="entry"&&o&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Step 2:"})," Add an entry for ",e.jsx("strong",{children:o.title})]})}),e.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(P,{className:"w-5 h-5 text-indigo-600"}),e.jsx("h4",{className:"font-semibold text-slate-800",children:o.title})]}),e.jsx("p",{className:"text-sm text-slate-500 font-mono",children:o.role_code})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-3",children:"Entry Type *"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("button",{type:"button",onClick:()=>v("submission"),className:`p-6 rounded-xl border-2 transition-all ${N==="submission"?"border-blue-500 bg-blue-50":"border-slate-200 hover:border-slate-300 bg-white"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:`p-3 rounded-lg ${N==="submission"?"bg-blue-100":"bg-slate-100"}`,children:e.jsx(ve,{className:`w-6 h-6 ${N==="submission"?"text-blue-600":"text-slate-400"}`})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:`font-bold text-lg ${N==="submission"?"text-blue-800":"text-slate-700"}`,children:"Submission"}),e.jsx("div",{className:`text-sm ${N==="submission"?"text-blue-600":"text-slate-500"}`,children:"Submit candidate profile"})]})]}),N==="submission"&&e.jsx("div",{className:"flex justify-center",children:e.jsx(J,{className:"w-6 h-6 text-blue-600"})})]}),e.jsxs("button",{type:"button",onClick:()=>v("interview"),className:`p-6 rounded-xl border-2 transition-all ${N==="interview"?"border-purple-500 bg-purple-50":"border-slate-200 hover:border-slate-300 bg-white"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:`p-3 rounded-lg ${N==="interview"?"bg-purple-100":"bg-slate-100"}`,children:e.jsx(U,{className:`w-6 h-6 ${N==="interview"?"text-purple-600":"text-slate-400"}`})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:`font-bold text-lg ${N==="interview"?"text-purple-800":"text-slate-700"}`,children:"Interview"}),e.jsx("div",{className:`text-sm ${N==="interview"?"text-purple-600":"text-slate-500"}`,children:"Schedule interview round"})]})]}),N==="interview"&&e.jsx("div",{className:"flex justify-center",children:e.jsx(J,{className:"w-6 h-6 text-purple-600"})})]})]})]}),N==="submission"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-3",children:"Response Time *"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[{value:"6h",label:"Within 6 Hours",desc:"Fast response",color:"emerald"},{value:"24h",label:"Within 24 Hours",desc:"Same day",color:"blue"},{value:"after_24h",label:"After 24 Hours",desc:"Standard",color:"purple"}].map(r=>e.jsxs("button",{type:"button",onClick:()=>be(r.value),className:`p-4 rounded-xl border-2 transition-all ${le===r.value?`border-${r.color}-500 bg-${r.color}-50`:"border-slate-200 hover:border-slate-300 bg-white"}`,children:[e.jsx("div",{className:`text-sm font-semibold mb-1 ${le===r.value?`text-${r.color}-800`:"text-slate-900"}`,children:r.label}),e.jsx("div",{className:`text-xs ${le===r.value?`text-${r.color}-600`:"text-slate-500"}`,children:r.desc}),le===r.value&&e.jsx("div",{className:"flex justify-center mt-2",children:e.jsx(J,{className:`w-5 h-5 text-${r.color}-600`})})]},r.value))}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"CV Matching Percentage *"}),e.jsx("input",{type:"number",min:0,max:100,value:ne,onChange:r=>Ne(parseFloat(r.target.value)),className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Enter percentage (0-100)"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Minimum allowed is 85%"})]})]}),N==="interview"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-3",children:"Interview Level *"}),e.jsx("div",{className:"grid grid-cols-3 gap-4",children:[1,2,3].map(r=>e.jsxs("button",{type:"button",onClick:()=>ge(r),className:`p-6 rounded-xl border-2 transition-all ${de===r?"border-purple-500 bg-purple-50":"border-slate-200 hover:border-slate-300 bg-white"}`,children:[e.jsx("div",{className:`text-3xl font-bold mb-2 ${de===r?"text-purple-600":"text-slate-400"}`,children:r}),e.jsxs("div",{className:`text-sm ${de===r?"text-purple-700":"text-slate-500"}`,children:["Level ",r]}),de===r&&e.jsx("div",{className:"flex justify-center mt-2",children:e.jsx(J,{className:"w-5 h-5 text-purple-600"})})]},r))})]}),N&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Candidate Name (Optional)"}),e.jsx("input",{type:"text",value:b,onChange:r=>{m(r.target.value),G(null)},className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Enter candidate's name..."}),e.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["For role: ",e.jsx("span",{className:"font-semibold",children:o.title})]}),V&&B.length>0&&e.jsxs("div",{className:"mt-3 p-4 bg-yellow-50 border-2 border-yellow-300 rounded-lg",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx("div",{className:"bg-yellow-100 p-2 rounded-lg",children:e.jsx(U,{className:"w-5 h-5 text-yellow-700"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-semibold text-yellow-900 mb-1",children:"Similar Candidates Found"}),e.jsxs("p",{className:"text-sm text-yellow-700",children:["We found ",B.length," candidate",B.length>1?"s":""," with similar names. Are you submitting one of these existing candidates?"]})]}),e.jsx("button",{type:"button",onClick:()=>se(!1),className:"text-yellow-600 hover:text-yellow-800",children:e.jsx(X,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-2",children:[B.map(r=>e.jsx("button",{type:"button",onClick:()=>{G(r.id),m(r.name),i(r.email||""),A(r.phone||""),se(!1)},className:`w-full p-3 rounded-lg text-left transition-all ${q===r.id?"bg-indigo-100 border-2 border-indigo-400":"bg-white border border-yellow-200 hover:border-yellow-400"}`,children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold text-slate-900",children:r.name}),e.jsx("span",{className:"text-xs text-slate-500 font-mono",children:r.candidate_code}),q===r.id&&e.jsx(J,{className:"w-4 h-4 text-indigo-600"})]}),r.email&&e.jsx("p",{className:"text-xs text-slate-600 mt-1",children:r.email}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsxs("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded",children:[r.total_associations||0," submissions"]}),r.is_active===0&&e.jsx("span",{className:"text-xs bg-red-100 text-red-700 px-2 py-0.5 rounded",children:"Inactive"})]})]})})},r.id)),e.jsx("button",{type:"button",onClick:()=>{G(null),se(!1)},className:"w-full p-3 bg-white border-2 border-emerald-300 rounded-lg text-emerald-700 font-medium hover:bg-emerald-50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(fe,{className:"w-4 h-4"}),"This is a new candidate"]})})]})]}),q&&e.jsxs("div",{className:"mt-2 p-2 bg-emerald-50 border border-emerald-200 rounded text-sm text-emerald-700 flex items-center gap-2",children:[e.jsx(J,{className:"w-4 h-4"}),"Using existing candidate record"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Email (Optional)"}),e.jsx("input",{type:"email",value:R,onChange:r=>i(r.target.value),className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"candidate@example.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Phone (Optional)"}),e.jsx("input",{type:"tel",value:_,onChange:r=>A(r.target.value),className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"+1 234 567 8900"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Notes (Optional)"}),e.jsxs("div",{className:"relative",children:[e.jsx(he,{className:"absolute left-3 top-3 w-5 h-5 text-slate-400"}),e.jsx("textarea",{value:Y,onChange:r=>ee(r.target.value),rows:3,className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none",placeholder:"Add any additional details..."})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[F&&e.jsx("div",{className:"flex-1 px-4 py-2 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm",children:F}),e.jsx("button",{type:"button",onClick:()=>{u("role"),h(null),v(null)},className:"px-6 py-3 border-2 border-slate-300 rounded-lg text-slate-700 font-medium hover:bg-slate-50 transition-colors",children:"Back"}),e.jsxs("button",{type:"button",onClick:I,disabled:L||!N,className:"flex-1 px-6 py-3 border-2 border-indigo-600 text-indigo-600 rounded-lg font-medium hover:bg-indigo-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[e.jsx(fe,{className:"w-5 h-5"}),L?"Submitting...":"Add Another Entry"]}),e.jsx("button",{type:"button",onClick:re,disabled:L||!N,className:"flex-1 px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg font-medium hover:from-indigo-700 hover:to-purple-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",children:L?"Submitting...":"Submit & Close"})]})]})]})]})})}function Us({client:s,onClose:x,onSuccess:d}){const[g,S]=l.useState([]),[k,y]=l.useState([]),[j,c]=l.useState(!0),[u,o]=l.useState(!1),[h,N]=l.useState("deal"),[v,t]=l.useState(null),[p,b]=l.useState(new Date().toISOString().split("T")[0]),[m,R]=l.useState(""),[i,_]=l.useState(!1);l.useEffect(()=>{A()},[s]);const A=async()=>{if(s)try{const n=await D(`/api/recruiter/roles/${s.id}/${s.team_id}`);if(n.ok){const z=await n.json();S(z)}const F=await D(`/api/recruiter/deal-roles?client_id=${s.id}&team_id=${s.team_id}`);if(F.ok){const z=await F.json();y(z)}}catch(n){console.error("Failed to fetch roles:",n)}finally{c(!1)}},Y=async()=>{if(!(!v||!s)){o(!0);try{if(h==="deal")await D("/api/recruiter/submissions",{method:"POST",body:JSON.stringify({client_id:s.id,team_id:s.team_id,role_id:v.id,entry_type:"deal",submission_date:p,notes:""})});else{const n=k.find(F=>F.id===v.id);n&&await D("/api/recruiter/submissions",{method:"POST",body:JSON.stringify({entry_type:"dropout",dropout_role_id:v.id,dropout_reason:m,client_id:n.client_id,team_id:n.team_id,role_id:n.id,submission_date:p,notes:""})})}d(),x()}catch(n){console.error("Failed to create entry:",n)}finally{o(!1)}}},ee=n=>{t(n),_(!1)},L=h==="deal"?g:k;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-emerald-600 to-teal-600 px-6 py-5 flex justify-between items-center rounded-t-2xl",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-white",children:"Quick Entry"}),s&&e.jsxs("p",{className:"text-sm text-emerald-100 mt-1",children:[s.name," • ",s.team_name]})]}),e.jsx("button",{onClick:x,className:"text-white hover:bg-white hover:bg-opacity-20 p-2 rounded-lg transition-colors",children:e.jsx(X,{className:"w-6 h-6"})})]}),j?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600"})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsx("p",{className:"text-sm text-blue-800",children:"Quickly add a deal or dropout entry without a submission"})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-3",children:"Entry Type *"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("button",{type:"button",onClick:()=>{N("deal"),t(null),R("")},className:`p-6 rounded-xl border-2 transition-all text-left ${h==="deal"?"border-emerald-500 bg-emerald-50":"border-slate-200 hover:border-slate-300 bg-white"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${h==="deal"?"bg-emerald-100":"bg-slate-100"}`,children:e.jsx(Q,{className:`w-5 h-5 ${h==="deal"?"text-emerald-600":"text-slate-400"}`})}),e.jsx("span",{className:`font-semibold ${h==="deal"?"text-emerald-800":"text-slate-700"}`,children:"Deal"})]}),e.jsx("p",{className:`text-sm ${h==="deal"?"text-emerald-600":"text-slate-500"}`,children:"Mark a role as closed deal"})]}),e.jsxs("button",{type:"button",onClick:()=>{N("dropout"),t(null),R("")},className:`p-6 rounded-xl border-2 transition-all text-left ${h==="dropout"?"border-red-500 bg-red-50":"border-slate-200 hover:border-slate-300 bg-white"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${h==="dropout"?"bg-red-100":"bg-slate-100"}`,children:e.jsx(ce,{className:`w-5 h-5 ${h==="dropout"?"text-red-600":"text-slate-400"}`})}),e.jsx("span",{className:`font-semibold ${h==="dropout"?"text-red-800":"text-slate-700"}`,children:"Dropout"})]}),e.jsx("p",{className:`text-sm ${h==="dropout"?"text-red-600":"text-slate-500"}`,children:"Record candidate dropout"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Entry Date *"}),e.jsxs("div",{className:"relative",children:[e.jsx(ue,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),e.jsx("input",{type:"date",value:p,onChange:n=>b(n.target.value),max:new Date().toISOString().split("T")[0],className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",required:!0})]})]}),h==="deal"?e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Select Active Role *",e.jsxs("span",{className:"text-xs text-slate-500 ml-2",children:["(",L.length," active ",L.length===1?"role":"roles"," available)"]})]}),L.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative",children:[e.jsx(P,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400 pointer-events-none"}),e.jsxs("select",{value:(v==null?void 0:v.id)||"",onChange:n=>{const F=L.find(z=>z.id===parseInt(n.target.value));t(F||null)},className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent appearance-none bg-white cursor-pointer",children:[e.jsx("option",{value:"",children:"-- Select a role --"}),L.map(n=>e.jsxs("option",{value:n.id,children:[n.role_code," - ",n.title]},n.id))]})]}),v&&e.jsx("div",{className:"mt-4 p-4 bg-emerald-50 border border-emerald-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-emerald-100 p-2 rounded-lg",children:e.jsx(P,{className:"w-5 h-5 text-emerald-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-semibold text-slate-900 mb-1",children:v.title}),e.jsx("p",{className:"text-xs text-slate-500 font-mono mb-2",children:v.role_code}),v.description&&e.jsx("p",{className:"text-sm text-slate-700 mb-2",children:v.description}),e.jsxs("p",{className:"text-xs text-slate-600",children:["Account Manager: ",e.jsx("span",{className:"font-medium",children:v.account_manager_name})]})]})]})})]}):e.jsxs("div",{className:"text-center py-8 bg-slate-50 border border-slate-200 rounded-lg",children:[e.jsx(P,{className:"w-12 h-12 text-slate-400 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-600 font-medium",children:"No active roles available"}),e.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"No active roles found for this client"})]})]}):e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Select Role with Deal *",e.jsx("span",{className:"text-xs text-slate-500 ml-2",children:"(Roles with deals for this client)"})]}),L.length>0?e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:()=>_(!0),className:`w-full p-4 rounded-lg border-2 transition-all text-left ${v?"border-red-500 bg-red-50":"border-slate-300 hover:border-slate-400 bg-white"}`,children:v?e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-red-100 p-2 rounded-lg",children:e.jsx(P,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-slate-900",children:v.title}),e.jsx("div",{className:"text-xs text-slate-500 font-mono mt-1",children:v.role_code})]})]}):e.jsx("div",{className:"text-slate-500 text-center",children:"Click to select a role with deal"})}),v&&e.jsx("div",{className:"mt-4 p-4 bg-amber-50 border border-amber-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-amber-800",children:[e.jsx("strong",{children:"Note:"})," This indicates a consultant was offered the role but declined it. Only your Account Manager can modify this role afterward."]})})]}):e.jsxs("div",{className:"text-center py-8 bg-slate-50 border border-slate-200 rounded-lg",children:[e.jsx(P,{className:"w-12 h-12 text-slate-400 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-600 font-medium",children:"No roles with deals found"}),e.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"No roles with deals found for this client"})]})]}),h==="dropout"&&v&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Dropout Reason *"}),e.jsxs("div",{className:"relative",children:[e.jsx(he,{className:"absolute left-3 top-3 w-5 h-5 text-slate-400"}),e.jsx("textarea",{value:m,onChange:n=>R(n.target.value),rows:3,className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent resize-none",placeholder:"Why did the candidate decline this offer? (e.g., better offer, relocation issues, compensation, etc.)",required:!0})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:x,className:"flex-1 px-6 py-3 border-2 border-slate-300 rounded-lg text-slate-700 font-medium hover:bg-slate-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"button",onClick:Y,disabled:u||!v||h==="dropout"&&!m.trim(),className:`flex-1 px-6 py-3 ${h==="deal"?"bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-700 hover:to-teal-700":"bg-gradient-to-r from-red-600 to-orange-600 hover:from-red-700 hover:to-orange-700"} text-white rounded-lg font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg`,children:u?"Submitting...":`Submit ${h==="deal"?"Deal":"Dropout"}`})]})]})]})}),i&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[60]",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-red-600 to-orange-600 px-6 py-4 flex justify-between items-center rounded-t-2xl",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"w-6 h-6 text-white"}),e.jsx("h3",{className:"text-xl font-bold text-white",children:"Select Role with Deal"})]}),e.jsx("button",{onClick:()=>_(!1),className:"text-white hover:bg-white hover:bg-opacity-20 p-2 rounded-lg transition-colors",children:e.jsx(X,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"space-y-2",children:k.map(n=>e.jsx("button",{type:"button",onClick:()=>ee(n),className:"w-full p-4 rounded-lg border-2 border-slate-200 hover:border-red-300 bg-white hover:bg-red-50 transition-all text-left",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-red-100 p-2 rounded-lg",children:e.jsx(P,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-slate-900",children:n.title}),e.jsx("div",{className:"text-xs text-slate-500 font-mono mt-1",children:n.role_code}),n.description&&e.jsx("p",{className:"text-sm text-slate-600 mt-2 line-clamp-2",children:n.description})]})]})},n.id))})})]})})]})}function qs({date:s,submissions:x,onClose:d,onAddEntry:g}){const S=t=>new Date(t+"T00:00:00").toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),k=t=>new Date(t).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),y=t=>{switch(t){case"submission":return"bg-blue-50 border-blue-200 text-blue-700";case"interview":return"bg-purple-50 border-purple-200 text-purple-700";case"deal":return"bg-emerald-50 border-emerald-200 text-emerald-700";case"dropout":return"bg-red-50 border-red-200 text-red-700";default:return"bg-slate-50 border-slate-200 text-slate-700"}},j=t=>{switch(t){case"submission":return e.jsx(he,{className:"w-5 h-5"});case"interview":return e.jsx(U,{className:"w-5 h-5"});case"deal":return e.jsx(Q,{className:"w-5 h-5"});case"dropout":return e.jsx(ce,{className:"w-5 h-5"});default:return e.jsx(he,{className:"w-5 h-5"})}},c=t=>{switch(t){case"6h":return"Fast response (within 6h)";case"24h":return"Same day (within 24h)";case"after_24h":return"Standard (after 24h)";default:return""}},u=t=>{switch(t){case 1:return"1st Interview";case 2:return"2nd Interview";case 3:return"3rd Interview";default:return"Interview"}},o=x.filter(t=>t.entry_type==="submission"),h=x.filter(t=>t.entry_type==="interview"),N=x.filter(t=>t.entry_type==="deal"),v=x.filter(t=>t.entry_type==="dropout");return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-indigo-600 to-purple-600 px-6 py-5 flex justify-between items-center rounded-t-2xl z-10",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-white",children:"Day Details"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(ue,{className:"w-4 h-4 text-indigo-100"}),e.jsx("p",{className:"text-sm text-indigo-100",children:S(s)})]})]}),e.jsx("button",{onClick:d,className:"text-white hover:bg-white hover:bg-opacity-20 p-2 rounded-lg transition-colors",children:e.jsx(X,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(he,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-blue-600",children:"Submissions"})]}),e.jsx("p",{className:"text-2xl font-bold text-blue-700",children:o.length})]}),e.jsxs("div",{className:"bg-purple-50 border-2 border-purple-200 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(U,{className:"w-5 h-5 text-purple-600"}),e.jsx("span",{className:"text-sm font-medium text-purple-600",children:"Interviews"})]}),e.jsx("p",{className:"text-2xl font-bold text-purple-700",children:h.length})]}),e.jsxs("div",{className:"bg-emerald-50 border-2 border-emerald-200 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Q,{className:"w-5 h-5 text-emerald-600"}),e.jsx("span",{className:"text-sm font-medium text-emerald-600",children:"Deals"})]}),e.jsx("p",{className:"text-2xl font-bold text-emerald-700",children:N.length})]}),e.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(ce,{className:"w-5 h-5 text-red-600"}),e.jsx("span",{className:"text-sm font-medium text-red-600",children:"Dropouts"})]}),e.jsx("p",{className:"text-2xl font-bold text-red-700",children:v.length})]})]}),x.length===0?e.jsxs("div",{className:"text-center py-12 bg-slate-50 border border-slate-200 rounded-xl",children:[e.jsx(ue,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 font-medium mb-2",children:"No entries for this day"}),e.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"Add your first submission, interview, deal, or dropout"}),e.jsx("button",{onClick:g,className:"px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg font-medium hover:from-indigo-700 hover:to-purple-700 transition-all shadow-lg",children:"Add Entry"})]}):e.jsx("div",{className:"space-y-3",children:x.map(t=>e.jsx("div",{className:`border-2 rounded-xl p-4 ${y(t.entry_type)}`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`p-3 rounded-lg ${t.entry_type==="submission"?"bg-blue-100":t.entry_type==="interview"?"bg-purple-100":t.entry_type==="deal"?"bg-emerald-100":"bg-red-100"}`,children:j(t.entry_type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"flex items-start justify-between gap-4 mb-2",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-bold text-slate-900 capitalize",children:t.entry_type==="interview"?u(t.interview_level):t.entry_type}),t.entry_type==="submission"&&t.submission_type&&e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-white bg-opacity-60 font-medium",children:c(t.submission_type)})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(ke,{className:"w-4 h-4"}),e.jsxs("span",{children:["Added at ",k(t.created_at)]})]})]})}),t.candidate_name&&e.jsx("div",{className:"p-2.5 bg-white bg-opacity-70 rounded-lg border border-slate-200 mb-2",children:e.jsxs("p",{className:"text-sm font-semibold text-indigo-900",children:["Candidate: ",t.candidate_name]})}),e.jsxs("div",{className:"space-y-2 mt-3",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(P,{className:"w-4 h-4 text-slate-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-slate-900",children:t.role_title}),e.jsx("p",{className:"text-xs font-mono text-slate-500",children:t.role_code})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(ae,{className:"w-4 h-4 text-slate-500"}),e.jsxs("span",{className:"text-slate-700",children:[t.client_name," • ",t.team_name]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(U,{className:"w-4 h-4 text-slate-500"}),e.jsxs("span",{className:"text-slate-700",children:["AM: ",t.account_manager_name]})]})]}),t.entry_type==="dropout"&&t.dropout_reason&&e.jsxs("div",{className:"mt-3 p-3 bg-red-100 border border-red-200 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-red-900 mb-1",children:"Dropout Reason:"}),e.jsx("p",{className:"text-sm text-red-800",children:t.dropout_reason})]}),t.notes&&e.jsxs("div",{className:"mt-3 p-3 bg-white bg-opacity-60 rounded-lg border border-slate-200",children:[e.jsx("p",{className:"text-sm font-medium text-slate-700 mb-1",children:"Notes:"}),e.jsx("p",{className:"text-sm text-slate-600",children:t.notes})]})]})]})},t.id))}),e.jsxs("div",{className:"flex gap-3 mt-6 pt-6 border-t border-slate-200",children:[e.jsx("button",{onClick:d,className:"flex-1 px-6 py-3 border-2 border-slate-300 rounded-lg text-slate-700 font-medium hover:bg-slate-50 transition-colors",children:"Close"}),e.jsx("button",{onClick:g,className:"flex-1 px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg font-medium hover:from-indigo-700 hover:to-purple-700 transition-all shadow-lg",children:"Add Entry for This Day"})]})]})]})})}function Ys({onDateClick:s,submissions:x=[]}){const[d,g]=l.useState(new Date),S=p=>{const b=p.getFullYear(),m=p.getMonth(),R=new Date(b,m,1),_=new Date(b,m+1,0).getDate(),A=R.getDay();return{daysInMonth:_,startingDayOfWeek:A}},{daysInMonth:k,startingDayOfWeek:y}=S(d),j=()=>{g(new Date(d.getFullYear(),d.getMonth()-1))},c=()=>{g(new Date(d.getFullYear(),d.getMonth()+1))},u=p=>{const b=d.getFullYear(),m=String(d.getMonth()+1).padStart(2,"0"),R=String(p).padStart(2,"0");return`${b}-${m}-${R}`},o=p=>{const b=x.filter(m=>m.submission_date===p);return{total:b.length,submissions:b.filter(m=>m.entry_type==="submission").length,interviews:b.filter(m=>m.entry_type==="interview").length,deals:b.filter(m=>m.entry_type==="deal").length,dropouts:b.filter(m=>m.entry_type==="dropout").length}},h=p=>{const b=new Date;return p===b.getDate()&&d.getMonth()===b.getMonth()&&d.getFullYear()===b.getFullYear()},N=p=>{const b=new Date(d.getFullYear(),d.getMonth(),p),m=new Date;return m.setHours(0,0,0,0),b>m},v=["January","February","March","April","May","June","July","August","September","October","November","December"],t=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-slate-800",children:[v[d.getMonth()]," ",d.getFullYear()]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:j,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:e.jsx(Ns,{className:"w-5 h-5 text-slate-600"})}),e.jsx("button",{onClick:c,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:e.jsx(ys,{className:"w-5 h-5 text-slate-600"})})]})]}),e.jsx("div",{className:"grid grid-cols-7 gap-2 mb-2",children:t.map(p=>e.jsx("div",{className:"text-center text-sm font-semibold text-slate-500 py-2",children:p},p))}),e.jsxs("div",{className:"grid grid-cols-7 gap-2",children:[Array.from({length:y}).map((p,b)=>e.jsx("div",{className:"aspect-square"},`empty-${b}`)),Array.from({length:k}).map((p,b)=>{const m=b+1,R=u(m),i=o(R),_=h(m),A=N(m);return e.jsxs("button",{onClick:()=>!A&&s(R),disabled:A,className:`aspect-square p-2 rounded-lg border-2 transition-all relative group ${_?"border-indigo-500 bg-indigo-50":A?"border-slate-200 bg-slate-50 cursor-not-allowed opacity-50":i.total>0?"border-blue-200 bg-blue-50 hover:border-blue-400 hover:bg-blue-100":"border-slate-200 hover:border-slate-300 hover:bg-slate-50"}`,children:[e.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[e.jsx("span",{className:`text-sm font-semibold ${_?"text-indigo-700":A?"text-slate-400":i.total>0?"text-blue-700":"text-slate-700"}`,children:m}),i.total>0&&e.jsxs("div",{className:"flex gap-1 mt-1 flex-wrap justify-center",children:[i.submissions>0&&e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-blue-500",title:`${i.submissions} submission${i.submissions>1?"s":""}`}),i.interviews>0&&e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-purple-500",title:`${i.interviews} interview${i.interviews>1?"s":""}`}),i.deals>0&&e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500",title:`${i.deals} deal${i.deals>1?"s":""}`}),i.dropouts>0&&e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-red-500",title:`${i.dropouts} dropout${i.dropouts>1?"s":""}`})]})]}),!A&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-white bg-opacity-90 rounded-lg",children:e.jsx(fe,{className:"w-5 h-5 text-indigo-600"})})]},m)})]}),e.jsx("div",{className:"mt-6 pt-4 border-t border-slate-200",children:e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-4 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded border-2 border-indigo-500 bg-indigo-50"}),e.jsx("span",{className:"text-slate-600",children:"Today"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),e.jsx("span",{className:"text-slate-600",children:"Submission"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-purple-500"}),e.jsx("span",{className:"text-slate-600",children:"Interview"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-500"}),e.jsx("span",{className:"text-slate-600",children:"Deal"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),e.jsx("span",{className:"text-slate-600",children:"Dropout"})]})]})})]})}function rt(){const[s,x]=l.useState([]),[d,g]=l.useState(null),[S,k]=l.useState(!0);l.useEffect(()=>{y()},[]);const y=async()=>{try{console.log("Fetching clients...");const j=await D("/api/recruiter/clients");if(console.log("Clients response:",j.status),j.ok){const c=await j.json();console.log("Clients data:",c),x(c)}else{console.error("Failed to fetch clients, status:",j.status);const c=await j.text();console.error("Error response:",c)}}catch(j){console.error("Failed to fetch clients:",j)}finally{k(!1)}};return S?e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):d?e.jsx(Ms,{selectedClient:d,onClientChange:g,children:e.jsxs(He,{children:[e.jsx(oe,{index:!0,element:e.jsx(Ws,{selectedClient:d})}),e.jsx(oe,{path:"analytics",element:e.jsx(Fs,{})}),e.jsx(oe,{path:"candidates",element:e.jsx(Ls,{})}),e.jsx(oe,{path:"roles",element:e.jsx(Os,{})}),e.jsx(oe,{path:"company",element:e.jsx(as,{})}),e.jsx(oe,{path:"profile",element:e.jsx(zs,{})}),e.jsx(oe,{path:"*",element:e.jsx(Qe,{to:"/recruiter",replace:!0})})]})}):s.length===0?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl border border-slate-200 p-8 max-w-md w-full text-center",children:[e.jsx("div",{className:"flex items-center justify-center mb-6",children:e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-2xl flex items-center justify-center",children:e.jsx(ae,{className:"w-8 h-8 text-red-600"})})}),e.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"No Clients Assigned"}),e.jsx("p",{className:"text-slate-500 mb-4",children:"You don't have any clients assigned to your account yet."}),e.jsx("p",{className:"text-sm text-slate-400",children:"Please contact your administrator to assign clients to your account."})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl border border-slate-200 p-8 max-w-md w-full",children:[e.jsx("div",{className:"flex items-center justify-center mb-6",children:e.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-indigo-600 to-purple-600 rounded-2xl flex items-center justify-center",children:e.jsx(ae,{className:"w-8 h-8 text-white"})})}),e.jsx("h2",{className:"text-2xl font-bold text-slate-800 text-center mb-2",children:"Select Client"}),e.jsx("p",{className:"text-slate-500 text-center mb-6",children:"Choose a client to view their dashboard"}),e.jsx("div",{className:"space-y-3",children:s.map(j=>e.jsx("button",{onClick:()=>g(j),className:"w-full p-4 bg-gradient-to-r from-slate-50 to-slate-100 hover:from-indigo-50 hover:to-purple-50 border-2 border-slate-200 hover:border-indigo-300 rounded-xl transition-all text-left group",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-slate-800 group-hover:text-indigo-600 transition-colors",children:j.name}),e.jsx("p",{className:"text-sm text-slate-500 font-mono",children:j.client_code}),j.team_name&&e.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:["Team: ",j.team_name," (",j.team_code,")"]})]}),e.jsx("div",{className:"w-8 h-8 bg-indigo-100 group-hover:bg-indigo-200 rounded-lg flex items-center justify-center transition-colors",children:e.jsx(ae,{className:"w-4 h-4 text-indigo-600"})})]})},j.id))})]})})}function Ws({selectedClient:s}){const[x,d]=l.useState(!1),[g,S]=l.useState(!1),[k,y]=l.useState(!1),[j,c]=l.useState(null),[u,o]=l.useState(null),[h,N]=l.useState([]),[v,t]=l.useState(0),[p,b]=l.useState(""),[m,R]=l.useState(null);l.useEffect(()=>{i()},[s,p]),l.useEffect(()=>{const n=setInterval(()=>{i()},3e4);return()=>clearInterval(n)},[s,p]);const i=async()=>{try{const n=p?`&search_name=${encodeURIComponent(p)}`:"",F=await D(`/api/recruiter/submissions?client_id=${s.id}${n}`);if(F.ok){const O=await F.json();o(O.stats),N(O.submissions||[])}const z=await D(`/api/recruiter/ebes?filter=combined&client_id=${s.id}`);if(z.ok){const O=await z.json();t(O.score)}const B=await D(`/api/recruiter/pipeline?client_id=${s.id}`);if(B.ok){const O=await B.json();R(O)}}catch(n){console.error("Failed to fetch data:",n)}},_=()=>{c(null),d(!0)},A=n=>{c(n),y(!0)},Y=()=>{y(!1),d(!0)},ee=n=>h.filter(F=>F.submission_date===n),L=()=>{i()};return e.jsxs(e.Fragment,{children:[k&&j&&!x&&e.jsx(qs,{date:j,submissions:ee(j),onClose:()=>{y(!1),c(null)},onAddEntry:Y}),x&&e.jsx(Bs,{client:s,selectedDate:j||void 0,onClose:()=>{d(!1),c(null)},onSuccess:L}),g&&e.jsx(Us,{client:s,onClose:()=>S(!1),onSuccess:L}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-slate-800",children:"Dashboard"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:_,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg font-medium hover:from-indigo-700 hover:to-purple-700 transition-all shadow-lg",children:[e.jsx(fe,{className:"w-5 h-5"}),"Add Entry"]}),e.jsxs("button",{onClick:()=>S(!0),className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-emerald-600 to-teal-600 text-white rounded-lg font-medium hover:from-emerald-700 hover:to-teal-700 transition-all shadow-lg",children:[e.jsx(ls,{className:"w-5 h-5"}),"Quick Deal/Dropout"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(Ys,{onDateClick:A,submissions:h})}),e.jsxs("div",{className:"space-y-6",children:[m&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(je,{className:"w-6 h-6 text-indigo-600"}),e.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"Pipeline Overview"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-blue-600",children:"Submissions"}),e.jsx("div",{className:"text-2xl font-bold text-blue-900",children:m.counts.submissions})]}),e.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-purple-600",children:"Interviews"}),e.jsx("div",{className:"text-2xl font-bold text-purple-900",children:m.counts.interview_1+m.counts.interview_2+m.counts.interview_3})]}),e.jsxs("div",{className:"bg-emerald-50 border border-emerald-200 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-emerald-600",children:"Deals"}),e.jsx("div",{className:"text-2xl font-bold text-emerald-700",children:m.counts.deals})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-4",children:[e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-amber-700",children:[e.jsx(Fe,{className:"w-4 h-4"})," No submission ≥7d"]}),e.jsx("div",{className:"text-xl font-bold text-amber-800",children:m.sla.roles_no_submission_7d})]}),e.jsxs("div",{className:"bg-rose-50 border border-rose-200 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-rose-700",children:[e.jsx(Fe,{className:"w-4 h-4"})," No interview ≥7d"]}),e.jsx("div",{className:"text-xl font-bold text-rose-800",children:m.sla.roles_no_interview_7d})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-teal-50 border-2 border-emerald-200 rounded-2xl p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-emerald-800 mb-3",children:"This Month"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("span",{className:"text-emerald-700 font-semibold",children:[(u==null?void 0:u.total)||0," submissions"]})}),e.jsxs("div",{className:"text-sm text-emerald-600",children:[(u==null?void 0:u.interviews)||0," interviews · ",(u==null?void 0:u.deals)||0," deals closed"]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border-2 border-blue-200 rounded-2xl p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-blue-800 mb-3",children:"EBES Score"}),e.jsx("div",{className:"text-4xl font-bold text-blue-600 mb-2",children:v.toFixed(1)}),e.jsx("p",{className:"text-sm text-blue-700",children:"Current performance rating"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 border-2 border-purple-200 rounded-2xl p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-purple-800 mb-3",children:"Activity Rate"}),e.jsx("div",{className:"flex items-baseline gap-2 mb-2",children:e.jsxs("span",{className:"text-3xl font-bold text-purple-600",children:[u!=null&&u.submission_6h&&(u!=null&&u.total)?(u.submission_6h/u.total*100).toFixed(0):0,"%"]})}),e.jsx("p",{className:"text-sm text-purple-700",children:"Compared to last month"})]})]})]}),m&&m.focus.length>0&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(xe,{className:"w-6 h-6 text-indigo-600"}),e.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"Today’s Focus"})]}),e.jsx("div",{className:"space-y-2",children:m.focus.slice(0,5).map((n,F)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-slate-800",children:n.title}),e.jsx("div",{className:"text-xs text-slate-500 font-mono",children:n.role_code})]}),e.jsx("div",{className:"text-xs font-semibold px-2 py-1 rounded-full border",children:n.reason})]},`${n.role_id}-${F}`))})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-500 rounded-xl flex items-center justify-center",children:e.jsx(rs,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"Recent Activity"}),e.jsxs("p",{className:"text-sm text-slate-500",children:["Your latest entries for ",s.name]})]})]}),e.jsxs("div",{className:"relative w-64",children:[e.jsx(Ce,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx("input",{type:"text",value:p,onChange:n=>b(n.target.value),placeholder:"Search by candidate name...",className:"w-full pl-9 pr-4 py-2 text-sm border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]})]}),h.length===0?e.jsxs("div",{className:"text-center py-12 bg-slate-50 rounded-xl",children:[e.jsx(P,{className:"w-12 h-12 text-slate-400 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-600 font-medium",children:p?`No submissions found for "${p}"`:"No activity yet"}),e.jsx("p",{className:"text-sm text-slate-500 mt-1",children:p?"Try a different search term":"Start by adding your first entry"})]}):e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:h.sort((n,F)=>new Date(F.created_at).getTime()-new Date(n.created_at).getTime()).map(n=>{const F=O=>{switch(O){case"submission":return"bg-blue-50 border-blue-200 text-blue-700";case"interview":return"bg-purple-50 border-purple-200 text-purple-700";case"deal":return"bg-emerald-50 border-emerald-200 text-emerald-700";case"dropout":return"bg-red-50 border-red-200 text-red-700";default:return"bg-slate-50 border-slate-200 text-slate-700"}},z=O=>{switch(O){case"submission":return e.jsx(fs,{className:"w-4 h-4"});case"interview":return e.jsx(U,{className:"w-4 h-4"});case"deal":return e.jsx(Q,{className:"w-4 h-4"});case"dropout":return e.jsx(xe,{className:"w-4 h-4"});default:return e.jsx(P,{className:"w-4 h-4"})}},B=O=>{const V=new Date(O),q=new Date().getTime()-V.getTime(),G=Math.floor(q/(1e3*60*60*24));return G===0?"Today":G===1?"Yesterday":G<7?`${G} days ago`:V.toLocaleDateString("en-US",{month:"short",day:"numeric"})};return e.jsx("div",{className:`border-2 rounded-lg p-3 ${F(n.entry_type)} transition-all hover:shadow-md`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${n.entry_type==="submission"?"bg-blue-100":n.entry_type==="interview"?"bg-purple-100":n.entry_type==="deal"?"bg-emerald-100":"bg-red-100"}`,children:z(n.entry_type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[e.jsx("span",{className:"font-semibold text-slate-800 capitalize truncate",children:n.entry_type==="interview"?`Level ${n.interview_level} Interview`:n.entry_type}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-slate-500 flex-shrink-0",children:[e.jsx(ke,{className:"w-3 h-3"}),B(n.created_at)]})]}),n.candidate_name&&e.jsx("p",{className:"text-sm font-semibold text-indigo-700 mb-1",children:n.candidate_name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"w-3 h-3 text-slate-500 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-slate-700 truncate",children:n.role_title})]}),e.jsx("p",{className:"text-xs text-slate-500 font-mono mt-1",children:n.role_code})]})]})},n.id)})})]})]})]})}export{rt as default};
